<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Link GIS to R • link2GI</title>
<!-- jquery --><script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js" integrity="sha256-FgpCb/KJQlLNfOu91ta32o/NMZxltwRo8QtmkMRdAu8=" crossorigin="anonymous"></script><!-- Bootstrap --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.3.7/css/bootstrap.min.css" integrity="sha256-916EbMg70RQy9LHiGkXzG8hSg9EdNy97GazNG/aiY1w=" crossorigin="anonymous">
<script src="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.3.7/js/bootstrap.min.js" integrity="sha256-U5ZEeKfGNOja007MMD3YBI0A3OSZOQbeG6z2f2Y0hu8=" crossorigin="anonymous"></script><!-- Font Awesome icons --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.7.1/css/all.min.css" integrity="sha256-nAmazAk6vS34Xqo0BSrTb+abbtFlgsFK7NKSi6o7Y78=" crossorigin="anonymous">
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.7.1/css/v4-shims.min.css" integrity="sha256-6qHlizsOWFskGlwVOKuns+D1nB6ssZrHQrNj1wGplHc=" crossorigin="anonymous">
<!-- clipboard.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.4/clipboard.min.js" integrity="sha256-FiZwavyI2V6+EXO1U+xzLG3IKldpiTFf3153ea9zikQ=" crossorigin="anonymous"></script><!-- headroom.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.9.4/headroom.min.js" integrity="sha256-DJFC1kqIhelURkuza0AvYal5RxMtpzLjFhsnVIeuk+U=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.9.4/jQuery.headroom.min.js" integrity="sha256-ZX/yNShbjqsohH1k95liqY9Gd8uOiE1S4vZc+9KQ1K4=" crossorigin="anonymous"></script><!-- pkgdown --><link href="../pkgdown.css" rel="stylesheet">
<script src="../pkgdown.js"></script><meta property="og:title" content="Link GIS to R">
<meta property="og:description" content="">
<meta name="twitter:card" content="summary">
<!-- mathjax --><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/config/TeX-AMS-MML_HTMLorMML.js" integrity="sha256-84DKXVJXs0/F8OTMzX4UR909+jtl4G7SPypPavF+GfA=" crossorigin="anonymous"></script><!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]-->
</head>
<body>
    <div class="container template-article">
      <header><div class="navbar navbar-default navbar-fixed-top" role="navigation">
  <div class="container">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar" aria-expanded="false">
        <span class="sr-only">Toggle navigation</span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <span class="navbar-brand">
        <a class="navbar-link" href="../index.html">link2GI</a>
        <span class="version label label-default" data-toggle="tooltip" data-placement="bottom" title="Released version">0.3.8</span>
      </span>
    </div>

    <div id="navbar" class="navbar-collapse collapse">
      <ul class="nav navbar-nav">
<li>
  <a href="../index.html">
    <span class="fas fa fas fa-home fa-lg"></span>
     
  </a>
</li>
<li>
  <a href="../reference/index.html">Reference</a>
</li>
<li class="dropdown">
  <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" aria-expanded="false">
    Articles
     
    <span class="caret"></span>
  </a>
  <ul class="dropdown-menu" role="menu">
<li>
      <a href="../articles/link2GI1.html">Link GIS to R</a>
    </li>
  </ul>
</li>
<li>
  <a href="../news/index.html">Changelog</a>
</li>
      </ul>
<ul class="nav navbar-nav navbar-right">
<li>
  <a href="https://github.com/r-spatial/link2GI">
    <span class="fab fa fab fa-github fa-lg"></span>
     
  </a>
</li>
      </ul>
</div>
<!--/.nav-collapse -->
  </div>
<!--/.container -->
</div>
<!--/.navbar -->

      

      </header><div class="row">
  <div class="col-md-9 contents">
    <div class="page-header toc-ignore">
      <h1>Link GIS to R</h1>
                        <h4 class="author">Chris Reudenbach</h4>
            
            <h4 class="date">2019-11-21</h4>
      
      <small class="dont-index">Source: <a href="https://github.com/r-spatial/link2GI/blob/master/vignettes/link2GI1.Rmd"><code>vignettes/link2GI1.Rmd</code></a></small>
      <div class="hidden name"><code>link2GI1.Rmd</code></div>

    </div>

    
    
<div id="what-is-link2gi" class="section level1">
<h1 class="hasAnchor">
<a href="#what-is-link2gi" class="anchor"></a>What is link2GI?</h1>
<p>The <a href="https://CRAN.R-project.org/package=link2GI">link2GI</a> package provides a small linking tool to simplify the usage of GRASS and SAGA GIS and Orfeo Toolbox (OTB) for R users. the focus is to simplify the the accessibility of this software for non operating system specialists or highly experienced GIS geeks. Acutally it is a direct result of numerous graduate courses with R(-GIS) beginners in the hostile world of university computer pools running under extremely restricted Windows systems.</p>
<p>This vignette:</p>
<ul>
<li>shows how to use <code>link2GI</code> according to specific system requirements</li>
<li>gives some hands on examples of how to use<br>
</li>
<li>give some applied examples for more efficient spatial analysis</li>
</ul>
</div>
<div id="why-link2gi-now" class="section level1">
<h1 class="hasAnchor">
<a href="#why-link2gi-now" class="anchor"></a>Why link2GI now?</h1>
<p>R has quite a lot of classes for storing and dealing with spatial data. For vector data the <a href="https://CRAN.R-project.org/package=sp">sp</a> and recently the great <a href="https://CRAN.R-project.org/package=sf">sf</a> packages are well known and the raster data world is widely covered by the <a href="https://CRAN.R-project.org/package=raster">raster</a> package. Additionally external spatial data formats are interfaced by wrapping packages as <a href="https://CRAN.R-project.org/package=rgdal">rgdal</a> or <a href="https://CRAN.R-project.org/package=gdalUtils">gdalUtils</a>. For more specific links as needed for manipulating atmospheric modeling packages as <a href="https://CRAN.R-project.org/package=ncdf4">ncdf4</a> are very helpful.</p>
<p>The spatial analysis itself is often supported by wrapper packages that integrate external libraries, command line tools or a mixture of both in an R-like syntax <a href="https://CRAN.R-project.org/package=rgeos">rgeos</a>, <a href="https://CRAN.R-project.org/package=geosphere">geosphere</a>, <a href="https://CRAN.R-project.org/package=Distance">Distance</a>, <a href="https://CRAN.R-project.org/package=maptools">maptools</a>, <a href="https://CRAN.R-project.org/package=igraph">igraph</a> or <a href="https://CRAN.R-project.org/package=spatstat">spatstat</a>.</p>
<p>A comprehensive introduction to the spatial R-biotope and its backgrounds is excellently treated in <a href="https://geocompr.robinlovelace.net">Geocomputation with R</a> wich is highly recommend as a reference textbook.</p>
<p>Despite all this capabilities of spatial analysis and data handling in the world of <code>R</code>, it can be stated (at least from a non-R point of view), that there is still a enormous gap between R and the mature open source Geographic Information System (GIS) and even more Remote Sensing (RS) software community. <code>QGIS</code>, <code>GRASS GIS</code> and <code>SAGA GIS</code> are providing a comprehensive, growing and mature collection of highly sophisticated algorithms. The provided algorithms are fast, stable and most of them are well proofed. Probably most of the <code>R</code> users who are somehow related to the GI community know that there are awesome good wrapper packages for bridging this gap. For <a href="https://grass.osgeo.org/">GRASS GIS 7</a> it is <a href="https://CRAN.R-project.org/package=rgrass7">rgrass7</a> and for <a href="http://www.saga-gis.org/">SAGA GIS</a> the <a href="https://CRAN.R-project.org/package=RSAGA">RSAGA</a> package. The development of the <a href="https://CRAN.R-project.org/package=RQGIS">RQGIS</a> wrapper is the most recent outcome to provide a simple usage of the powerful <a href="https://www.qgis.org/">QGIS</a> command line interface.</p>
<p>Unfortunately one will run into a lot of technical problems depending on the choosen operating system (OS) or library dependencies or GIS software versions. In case of e.g. <code>RSAGA</code> the main problem has been that the SAGA GIS developers are not only changing the syntax and strategy of the command line interface (CLI) but also within the same release the calls differ from OS to OS. So the maintenance of RSAGA is at least laborious (but thumbs up is running again). Another example is given by <code>GRASS GIS</code> which is well known for a sophisticated setup of the environment and the spatial properties of the database. If you “just” want to use a specific GRASS algorithm from R, you will probablys get lost in setting up all OS-dependencies that are neccessary to set up a correct temporary or permanent GRASS-environment from “outside”. This is not only caused due to the strict spatial and projection requirements of GRASS but much more by challenging OS enviroments especially Windows.</p>
<p>To make it short it is a bit cumbersome to deal with all this stuff if one just want to start e.g. GRASS from the R command line for e.g. a powerful random walk cost analysis (<code>r.walk</code>) call as provided by GRASS.</p>
</div>
<div id="what-means-linking" class="section level1">
<h1 class="hasAnchor">
<a href="#what-means-linking" class="anchor"></a>What means linking?</h1>
<p>Linking means simply to provide all necessary environment settings that satisfy the existing wrapper packages as well as in addition the full access to the the command line (CLI) APIs of the mentioned software tools. <code>link2GI</code> tries to analyze which software is installed to set up an temporary enviroment meeting the above mentioned needs.</p>
<div id="grass-gis" class="section level3">
<h3 class="hasAnchor">
<a href="#grass-gis" class="anchor"></a>GRASS GIS</h3>
<p><code>GRASS GIS</code> has the most challenging requirements. It needs a bunch of environment and path variables as <strong>and</strong> a correct setup of the geographical data parameters. The <code>linkGRASS7</code> function tries to find all installations let you (optionally) choose the one you want to use and generate the necessary variables. As a result you can use both the rgrass7 package or the command line <code>API</code> of <code>GRASS</code>.</p>
</div>
<div id="saga-gis" class="section level3">
<h3 class="hasAnchor">
<a href="#saga-gis" class="anchor"></a>SAGA GIS</h3>
<p><code>SAGA GIS</code> is a far easier to set up. Again the <code>linkSAGA</code> function tries to find all <code>SAGA</code> installations, let you (optionally) choose one and generate the necessary variables. You may also use <code>RSAGA</code> but you have to hand over the result of <code>linkSAGA</code> like <code><a href="https://rdrr.io/pkg/RSAGA/man/rsaga.env.html">RSAGA::rsaga.env(path = saga$sagaPath)</a></code>. For a straightforward usage you may simply use the <code>R</code> system() call to interface <code>R</code> with the <code>saga_cmd</code> API.</p>
</div>
<div id="otb" class="section level3">
<h3 class="hasAnchor">
<a href="#otb" class="anchor"></a>OTB</h3>
<p>The <code>Orfeo Toolbox</code> (OTB) is a very powerful remote sensing toolbox. It is widely used for classification, filtering and machine learning applications. You will find some of the implemented algorithm within different R packages but <strong>always</strong> much slower or only running on small data chunks. Due to a missing wrapper the linkage is performed to use the command line API of the <code>OTB</code>. Currently link2GI provides very basic list-based <code>OTB</code> wrapper.</p>
</div>
<div id="gdal" class="section level3">
<h3 class="hasAnchor">
<a href="#gdal" class="anchor"></a>GDAL</h3>
<p>GDAL is perfectly integrated in R. However in some cases it is beneficial to uses system calls and grab the binaries directly. <code>link2GI</code> generates a list of all pathes and commands so you may easily use also python scripts calls and other chains.</p>
</div>
</div>
<div id="usage-of-the-link2gi-package---basic-examples" class="section level1">
<h1 class="hasAnchor">
<a href="#usage-of-the-link2gi-package---basic-examples" class="anchor"></a>Usage of the link2GI package - Basic Examples</h1>
<div id="brute-force-search-usage" class="section level2">
<h2 class="hasAnchor">
<a href="#brute-force-search-usage" class="anchor"></a>Brute force search usage</h2>
<p>Automatic search and find of the installed GIS software binaries is performed by the <code>find</code> functions. Depending of you OS and the number of installed versions you will get a dataframe providing the binary and module folders.</p>
<div class="sourceCode" id="cb1"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb1-1"><a href="#cb1-1"></a><span class="co"># find all SAGA GIS installations at the default search location</span></span>
<span id="cb1-2"><a href="#cb1-2"></a><span class="kw"><a href="https://rdrr.io/r/base/library.html">require</a></span>(link2GI)</span>
<span id="cb1-3"><a href="#cb1-3"></a>saga &lt;-<span class="st"> </span>link2GI<span class="op">::</span><span class="kw"><a href="https://rdrr.io/pkg/link2GI/man/findSAGA.html">findSAGA</a></span>()</span>
<span id="cb1-4"><a href="#cb1-4"></a>saga</span></code></pre></div>
<p>Same with GRASS and OTB</p>
<div class="sourceCode" id="cb2"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb2-1"><a href="#cb2-1"></a><span class="co"># find all SAGA GIS installations at the default search location</span></span>
<span id="cb2-2"><a href="#cb2-2"></a><span class="kw"><a href="https://rdrr.io/r/base/library.html">require</a></span>(link2GI)</span>
<span id="cb2-3"><a href="#cb2-3"></a>grass &lt;-<span class="st"> </span>link2GI<span class="op">::</span><span class="kw"><a href="https://rdrr.io/pkg/link2GI/man/findGRASS.html">findGRASS</a></span>()</span>
<span id="cb2-4"><a href="#cb2-4"></a>grass</span>
<span id="cb2-5"><a href="#cb2-5"></a>otb &lt;-<span class="st"> </span>link2GI<span class="op">::</span><span class="kw"><a href="https://rdrr.io/pkg/link2GI/man/findOTB.html">findOTB</a></span>()</span>
<span id="cb2-6"><a href="#cb2-6"></a>otb</span></code></pre></div>
<p>The <code>find</code> functions are providing an overview of the installed software. This functions are not establishing any linkages or changing settings.</p>
</div>
<div id="setting-up-project-structures" class="section level2">
<h2 class="hasAnchor">
<a href="#setting-up-project-structures" class="anchor"></a>Setting up project structures</h2>
<p>If you just call link2GI on the fly , that means for a single temporary operation, there will be no need for setting up folders and project structures. If you work on a more complex project it is seems to be helpful to support this by a fixed structure. Same with existing GRASS projects wich need to be in specific mapsets and locations.</p>
<p>A straightforward (you may call it also dirty) approach is the ìnitProj`function that creates folder structures (if not existing) and establishes (if wanted) global variables containing the pathes as strings.</p>
<div class="sourceCode" id="cb3"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb3-1"><a href="#cb3-1"></a><span class="co"># find all SAGA GIS installations at the default search location</span></span>
<span id="cb3-2"><a href="#cb3-2"></a><span class="kw"><a href="https://rdrr.io/r/base/library.html">require</a></span>(link2GI)</span>
<span id="cb3-3"><a href="#cb3-3"></a>link2GI<span class="op">::</span><span class="kw"><a href="https://rdrr.io/pkg/link2GI/man/initProj.html">initProj</a></span>(<span class="dt">projRootDir =</span> <span class="kw"><a href="https://rdrr.io/r/base/tempfile.html">tempdir</a></span>(),</span>
<span id="cb3-4"><a href="#cb3-4"></a>                 <span class="dt">projFolders =</span> <span class="kw"><a href="https://rdrr.io/r/base/c.html">c</a></span>(<span class="st">"data/"</span>,</span>
<span id="cb3-5"><a href="#cb3-5"></a>                                 <span class="st">"data/level0/"</span>,</span>
<span id="cb3-6"><a href="#cb3-6"></a>                                 <span class="st">"data/level1/"</span>,</span>
<span id="cb3-7"><a href="#cb3-7"></a>                                  <span class="st">"output/"</span>,</span>
<span id="cb3-8"><a href="#cb3-8"></a>                                  <span class="st">"run/"</span>,</span>
<span id="cb3-9"><a href="#cb3-9"></a>                                  <span class="st">"fun/"</span>),</span>
<span id="cb3-10"><a href="#cb3-10"></a>                 <span class="dt">path_prefix =</span> <span class="st">"path_to_"</span> ,</span>
<span id="cb3-11"><a href="#cb3-11"></a>                 <span class="dt">global =</span><span class="ot">TRUE</span>)</span></code></pre></div>
</div>
<div id="linksaga---locate-and-set-up-saga-api-bindings" class="section level2">
<h2 class="hasAnchor">
<a href="#linksaga---locate-and-set-up-saga-api-bindings" class="anchor"></a>linkSAGA - Locate and set up ‘SAGA’ API bindings</h2>
<p>In earlier times it has been pretty cumbersome to link the correct <code>SAGA GIS</code> version. Since the version 1.x.x of <code>RSAGA</code> things turned much better. The new <code><a href="https://rdrr.io/pkg/RSAGA/man/rsaga.env.html">RSAGA::rsaga.env()</a></code> function is at getting the first <code>RSAGA</code> version in the search path. For using <code>RSAGA</code> with <code>link2GI</code> it is strongly recommended to call <code>RSAGA.env()</code> with the preferred path as provided by a ’ <code><a href="../reference/findSAGA.html">findSAGA()</a></code> call. It is also possible to provide the version number as shown below. Storing the result in adequate variables will then even give the opportunity to easyly switch between different <code>SAGA GIS</code> installations.</p>
<div class="sourceCode" id="cb4"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb4-1"><a href="#cb4-1"></a>saga1&lt;-link2GI<span class="op">::</span><span class="kw"><a href="https://rdrr.io/pkg/link2GI/man/linkSAGA.html">linkSAGA</a></span>(<span class="dt">ver_select =</span> <span class="dv">1</span>) </span>
<span id="cb4-2"><a href="#cb4-2"></a>saga1</span>
<span id="cb4-3"><a href="#cb4-3"></a>sagaEnv1&lt;-<span class="st"> </span>RSAGA<span class="op">::</span><span class="kw"><a href="https://rdrr.io/pkg/RSAGA/man/rsaga.env.html">rsaga.env</a></span>(<span class="dt">path =</span> saga1<span class="op">$</span>sagaPath)</span></code></pre></div>
</div>
<div id="linkgrass7---locate-and-set-up-grass-7-api-bindings" class="section level2">
<h2 class="hasAnchor">
<a href="#linkgrass7---locate-and-set-up-grass-7-api-bindings" class="anchor"></a>linkGRASS7 - Locate and set up ‘GRASS 7’ API bindings</h2>
<p><code>linkGRASS7</code> Initializes the session environment and the system paths for an easy access to <code>GRASS GIS 7.x.</code> The correct setup of the spatial and projection parameters is automatically performed by using either an existing and valid <code>raster</code>, <code>sp</code> or <code>sf</code> object, or manually by providing a list containing the minimum parameters needed. These properties are used to initialize either a temporary or a permanent <code>rgrass7</code> environment including the correct ‘GRASS 7’ database structure. If you provide none of the before mentioned objects <code>linkGRASS</code> will create a EPSG:4326 world wide location.</p>
<p>The most time consuming part on ‘Windows’ Systems is the search process. This can easily take 10 or more minutes. To speed up this process you can also provide a correct parameter set. Best way to do so is to call manually <code>findGRASS</code>. Then call <code>linkGRASS7</code> with the returned version arguments of your choice.</p>
<p>The function <code>linkGRASS7</code> tries to find all valid <code>GRASS GIS</code> binaries by analyzing the startup script files of <code>GRASS GIS</code>. After identifying the <code>GRASS GIS</code> binaries all necessary system variables and settings will be generated and passed to a temporary <code>R</code> environment.</p>
<p>If you have more than one valid installation and run <code>linkGRASS7</code> with the arguments <code>select_ver = TRUE</code>, then you will be ask to select one.</p>
<div id="standard-full-search-usage" class="section level4">
<h4 class="hasAnchor">
<a href="#standard-full-search-usage" class="anchor"></a>Standard Full Search Usage</h4>
<p>Automatic search and find of <code>GRASS</code> binaries using the meuse sp data object for spatial referencing. This is the highly recommended linking procedure. NOTE: if more than one <code>GRASS</code> installation is found the first one is selected automatically.</p>
<div class="sourceCode" id="cb5"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb5-1"><a href="#cb5-1"></a><span class="co"># get meuse data as sp object</span></span>
<span id="cb5-2"><a href="#cb5-2"></a><span class="kw"><a href="https://rdrr.io/r/base/library.html">require</a></span>(link2GI)</span>
<span id="cb5-3"><a href="#cb5-3"></a><span class="kw"><a href="https://rdrr.io/r/base/library.html">require</a></span>(sp)</span>
<span id="cb5-4"><a href="#cb5-4"></a><span class="kw"><a href="https://rdrr.io/r/utils/data.html">data</a></span>(meuse) </span>
<span id="cb5-5"><a href="#cb5-5"></a><span class="kw"><a href="https://rdrr.io/pkg/sp/man/coordinates.html">coordinates</a></span>(meuse) &lt;-<span class="st"> </span><span class="er">~</span>x<span class="op">+</span>y </span>
<span id="cb5-6"><a href="#cb5-6"></a><span class="kw"><a href="https://rdrr.io/pkg/sp/man/is.projected.html">proj4string</a></span>(meuse) &lt;-<span class="kw"><a href="https://rdrr.io/pkg/sp/man/CRS-class.html">CRS</a></span>(<span class="st">"+init=epsg:28992"</span>) </span>
<span id="cb5-7"><a href="#cb5-7"></a></span>
<span id="cb5-8"><a href="#cb5-8"></a><span class="co"># get meuse data as sf object</span></span>
<span id="cb5-9"><a href="#cb5-9"></a><span class="kw"><a href="https://rdrr.io/r/base/library.html">require</a></span>(sf)</span>
<span id="cb5-10"><a href="#cb5-10"></a>meuse_sf =<span class="st"> </span><span class="kw"><a href="https://rdrr.io/pkg/sf/man/st_as_sf.html">st_as_sf</a></span>(meuse, </span>
<span id="cb5-11"><a href="#cb5-11"></a>                    <span class="dt">coords =</span> </span>
<span id="cb5-12"><a href="#cb5-12"></a>                      <span class="kw"><a href="https://rdrr.io/r/base/c.html">c</a></span>(<span class="st">"x"</span>, <span class="st">"y"</span>), </span>
<span id="cb5-13"><a href="#cb5-13"></a>                    <span class="dt">crs =</span> <span class="dv">28992</span>, </span>
<span id="cb5-14"><a href="#cb5-14"></a>                    <span class="dt">agr =</span> <span class="st">"constant"</span>)</span>
<span id="cb5-15"><a href="#cb5-15"></a></span>
<span id="cb5-16"><a href="#cb5-16"></a><span class="co"># create a temporary GRASS linkage using the meuse data</span></span>
<span id="cb5-17"><a href="#cb5-17"></a></span>
<span id="cb5-18"><a href="#cb5-18"></a><span class="kw"><a href="../reference/linkGRASS7.html">linkGRASS7</a></span>(meuse)</span></code></pre></div>
</div>
<div id="typical-call-for-standalone-distro" class="section level4">
<h4 class="hasAnchor">
<a href="#typical-call-for-standalone-distro" class="anchor"></a>Typical call for standalone distro</h4>
<p>Assuming a typical standalone non-OSGeo4W installation and using the meuse sp data object for spatial referencing</p>
<div class="sourceCode" id="cb6"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb6-1"><a href="#cb6-1"></a><span class="kw"><a href="../reference/linkGRASS7.html">linkGRASS7</a></span>(meuse,<span class="kw"><a href="https://rdrr.io/r/base/c.html">c</a></span>(<span class="st">"C:/Program Files/GRASS GIS7.0.5"</span>,<span class="st">"GRASS GIS 7.0.5"</span>,<span class="st">"NSIS"</span>)) </span></code></pre></div>
</div>
<div id="typical-osgeo4w64-installation" class="section level4">
<h4 class="hasAnchor">
<a href="#typical-osgeo4w64-installation" class="anchor"></a>Typical OSGeo4W64 installation</h4>
<p>Typical <code>OSGeo4W64</code> installation using the meuse sp data object for spatial referencing</p>
<div class="sourceCode" id="cb7"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb7-1"><a href="#cb7-1"></a><span class="kw"><a href="../reference/linkGRASS7.html">linkGRASS7</a></span>(meuse,<span class="kw"><a href="https://rdrr.io/r/base/c.html">c</a></span>(<span class="st">"C:/OSGeo4W64"</span>,<span class="st">"grass-7.0.5"</span>,<span class="st">"osgeo4W"</span>))</span></code></pre></div>
</div>
<div id="manual-choosing-the-version" class="section level4">
<h4 class="hasAnchor">
<a href="#manual-choosing-the-version" class="anchor"></a>Manual choosing the version</h4>
<p>Choose manually the GRASS installation additionally using the meuse <code>sf</code> object for spatial referencing</p>
<div class="sourceCode" id="cb8"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb8-1"><a href="#cb8-1"></a><span class="kw"><a href="../reference/linkGRASS7.html">linkGRASS7</a></span>(meuse_sf, </span>
<span id="cb8-2"><a href="#cb8-2"></a>                     <span class="dt">ver_select =</span> <span class="ot">TRUE</span>)</span></code></pre></div>
</div>
<div id="choose-another-searchpath" class="section level4">
<h4 class="hasAnchor">
<a href="#choose-another-searchpath" class="anchor"></a>Choose another searchpath</h4>
<p>Choose manually the GRASS installation and change the search location additionally using the meuse <code>sf</code> object for spatial referencing</p>
<div class="sourceCode" id="cb9"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb9-1"><a href="#cb9-1"></a><span class="kw"><a href="../reference/linkGRASS7.html">linkGRASS7</a></span>(meuse_sf, </span>
<span id="cb9-2"><a href="#cb9-2"></a>                     <span class="dt">search_path =</span> <span class="st">"D:/"</span>)</span></code></pre></div>
</div>
<div id="creating-a-permanent-gisbase-folder" class="section level4">
<h4 class="hasAnchor">
<a href="#creating-a-permanent-gisbase-folder" class="anchor"></a>Creating a permanent gisbase folder</h4>
<p>Creating a permanent <code>GRASS</code> gisdbase (folder structure) at “~/temp3” with the standard mapset “PERMANENT”" and the location named “project1”. For all spatial attributes use the the meuse <code>sf</code> object.</p>
<div class="sourceCode" id="cb10"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb10-1"><a href="#cb10-1"></a><span class="kw"><a href="../reference/linkGRASS7.html">linkGRASS7</a></span>(<span class="dt">x =</span> meuse_sf, </span>
<span id="cb10-2"><a href="#cb10-2"></a>                     <span class="dt">gisdbase =</span> <span class="st">"~/temp3"</span>,</span>
<span id="cb10-3"><a href="#cb10-3"></a>                     <span class="dt">location =</span> <span class="st">"project1"</span>)   </span></code></pre></div>
</div>
<div id="using-a-permanent-gisbase-folder" class="section level4">
<h4 class="hasAnchor">
<a href="#using-a-permanent-gisbase-folder" class="anchor"></a>Using a Permanent gisbase folder</h4>
<p>Link to the permanent <code>GRASS</code> gisdbase (folder structure) at “~/temp3” with the standard mapset “PERMANENT” and the location named “project1”. For all spatial attributes use the the meuse <code>sf</code> object.</p>
<div class="sourceCode" id="cb11"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb11-1"><a href="#cb11-1"></a><span class="kw"><a href="../reference/linkGRASS7.html">linkGRASS7</a></span>(<span class="dt">gisdbase =</span> <span class="st">"~/temp3"</span>, <span class="dt">location =</span> <span class="st">"project1"</span>, </span>
<span id="cb11-2"><a href="#cb11-2"></a>                     <span class="dt">gisdbase_exist =</span> <span class="ot">TRUE</span>)   </span></code></pre></div>
</div>
<div id="manual-setup-of-the-spatial-attributes" class="section level4">
<h4 class="hasAnchor">
<a href="#manual-setup-of-the-spatial-attributes" class="anchor"></a>Manual Setup of the spatial attributes</h4>
<p>Setting up <code>GRASS</code> manually with spatial parameters of the meuse data</p>
<div class="sourceCode" id="cb12"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb12-1"><a href="#cb12-1"></a> <span class="kw"><a href="../reference/linkGRASS7.html">linkGRASS7</a></span>(<span class="dt">spatial_params =</span> <span class="kw"><a href="https://rdrr.io/r/base/c.html">c</a></span>(<span class="dv">178605</span>,<span class="dv">329714</span>,<span class="dv">181390</span>,<span class="dv">333611</span>,</span>
<span id="cb12-2"><a href="#cb12-2"></a>                              <span class="st">"+proj=sterea +lat_0=52.15616055555555 </span></span>
<span id="cb12-3"><a href="#cb12-3"></a><span class="st">                               +lon_0=5.38763888888889 +k=0.9999079 </span></span>
<span id="cb12-4"><a href="#cb12-4"></a><span class="st">                               +x_0=155000 +y_0=463000 +no_defs </span></span>
<span id="cb12-5"><a href="#cb12-5"></a><span class="st">                               +a=6377397.155 +rf=299.1528128</span></span>
<span id="cb12-6"><a href="#cb12-6"></a><span class="st">                               +towgs84=565.4171,50.3319,465.5524,</span></span>
<span id="cb12-7"><a href="#cb12-7"></a><span class="st">                                -0.398957,0.343988,-1.8774,4.0725</span></span>
<span id="cb12-8"><a href="#cb12-8"></a><span class="st">                               +to_meter=1"</span>)) </span></code></pre></div>
</div>
</div>
<div id="a-typical-usecase-for-the-orfeo-toolbox-wrapper" class="section level2">
<h2 class="hasAnchor">
<a href="#a-typical-usecase-for-the-orfeo-toolbox-wrapper" class="anchor"></a>A typical usecase for the Orfeo Toolbox wrapper</h2>
<p>link2GI supports the use of the Orfeo Toolbox with a listbased simple wrapper function. Actually two functions parse the modules and functions syntax dumps and generate a command list that is easy to modify with the necessary arguments.</p>
<p>Usually you have to get the module list first:</p>
<div class="sourceCode" id="cb13"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb13-1"><a href="#cb13-1"></a><span class="co"># link to the installed OTB </span></span>
<span id="cb13-2"><a href="#cb13-2"></a>otbLinks&lt;-link2GI<span class="op">::</span><span class="kw"><a href="https://rdrr.io/pkg/link2GI/man/linkOTB.html">linkOTB</a></span>()</span>
<span id="cb13-3"><a href="#cb13-3"></a></span>
<span id="cb13-4"><a href="#cb13-4"></a></span>
<span id="cb13-5"><a href="#cb13-5"></a><span class="co"># get the modulelist from the linked version</span></span>
<span id="cb13-6"><a href="#cb13-6"></a>algo&lt;-<span class="kw"><a href="../reference/parseOTBAlgorithms.html">parseOTBAlgorithms</a></span>(<span class="dt">gili =</span> otbLinks)</span></code></pre></div>
<p>Based on the modules of the current version of OTB you can then choose the module(s) you want to use.</p>
<div class="sourceCode" id="cb14"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb14-1"><a href="#cb14-1"></a><span class="co">## for the example we use the edge detection, </span></span>
<span id="cb14-2"><a href="#cb14-2"></a><span class="co">## because of the windows call via a batch file </span></span>
<span id="cb14-3"><a href="#cb14-3"></a><span class="co">## we have to distinguish the module name</span></span>
<span id="cb14-4"><a href="#cb14-4"></a><span class="kw"><a href="https://rdrr.io/r/base/ifelse.html">ifelse</a></span>(<span class="kw"><a href="https://rdrr.io/r/base/Sys.info.html">Sys.info</a></span>()[<span class="st">"sysname"</span>]<span class="op">==</span><span class="st">"Windows"</span>, </span>
<span id="cb14-5"><a href="#cb14-5"></a>algo_keyword&lt;-<span class="st"> "EdgeExtraction.bat"</span>,</span>
<span id="cb14-6"><a href="#cb14-6"></a>algo_keyword&lt;-<span class="st"> "EdgeExtraction"</span>)</span>
<span id="cb14-7"><a href="#cb14-7"></a></span>
<span id="cb14-8"><a href="#cb14-8"></a><span class="co"># now create the command list</span></span>
<span id="cb14-9"><a href="#cb14-9"></a>algo_cmd&lt;-<span class="kw"><a href="../reference/parseOTBFunction.html">parseOTBFunction</a></span>(<span class="dt">algo =</span> algo[algo[]<span class="op">==</span>algo_keyword],<span class="dt">gili =</span> otblink)</span>
<span id="cb14-10"><a href="#cb14-10"></a><span class="co">## print the current command</span></span>
<span id="cb14-11"><a href="#cb14-11"></a><span class="kw"><a href="https://rdrr.io/r/base/print.html">print</a></span>(algo_cmd)</span></code></pre></div>
<p>Admittedly this is a very straightforward and preliminary approach. Nevertheless it provids you a valid list of all OTB API calls that can easily manipulated for your needs. The following working example will give you an idea how to use it.</p>
<div class="sourceCode" id="cb15"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb15-1"><a href="#cb15-1"></a><span class="co">###########</span></span>
<span id="cb15-2"><a href="#cb15-2"></a><span class="co">### usecase</span></span>
<span id="cb15-3"><a href="#cb15-3"></a><span class="co">###########</span></span>
<span id="cb15-4"><a href="#cb15-4"></a></span>
<span id="cb15-5"><a href="#cb15-5"></a><span class="co">## link to OTB</span></span>
<span id="cb15-6"><a href="#cb15-6"></a>otblink&lt;-link2GI<span class="op">::</span><span class="kw"><a href="https://rdrr.io/pkg/link2GI/man/linkOTB.html">linkOTB</a></span>()</span>
<span id="cb15-7"><a href="#cb15-7"></a>path_OTB&lt;-otblink<span class="op">$</span>pathOTB</span>
<span id="cb15-8"><a href="#cb15-8"></a></span>
<span id="cb15-9"><a href="#cb15-9"></a><span class="co">## get data</span></span>
<span id="cb15-10"><a href="#cb15-10"></a><span class="kw"><a href="https://rdrr.io/r/base/getwd.html">setwd</a></span>(<span class="kw"><a href="https://rdrr.io/r/base/tempfile.html">tempdir</a></span>())</span>
<span id="cb15-11"><a href="#cb15-11"></a><span class="co">## get some typical data as provided by the authority</span></span>
<span id="cb15-12"><a href="#cb15-12"></a>url&lt;-<span class="st">"http://www.ldbv.bayern.de/file/zip/5619/DOP%2040_CIR.zip"</span></span>
<span id="cb15-13"><a href="#cb15-13"></a>res &lt;-<span class="st"> </span>curl<span class="op">::</span><span class="kw"><a href="https://jeroen.cran.dev/curl/reference/curl_download.html">curl_download</a></span>(url, <span class="st">"testdata.zip"</span>)</span>
<span id="cb15-14"><a href="#cb15-14"></a><span class="kw"><a href="https://rdrr.io/r/utils/unzip.html">unzip</a></span>(res,<span class="dt">junkpaths =</span> <span class="ot">TRUE</span>,<span class="dt">overwrite =</span> <span class="ot">TRUE</span>)</span>
<span id="cb15-15"><a href="#cb15-15"></a></span>
<span id="cb15-16"><a href="#cb15-16"></a><span class="co">## get all available OTB modules</span></span>
<span id="cb15-17"><a href="#cb15-17"></a>algo&lt;-<span class="kw"><a href="../reference/parseOTBAlgorithms.html">parseOTBAlgorithms</a></span>(<span class="dt">gili =</span> otblink)</span>
<span id="cb15-18"><a href="#cb15-18"></a></span>
<span id="cb15-19"><a href="#cb15-19"></a><span class="co">## for the example we use the edge detection, </span></span>
<span id="cb15-20"><a href="#cb15-20"></a><span class="co">## because of the windows call via a batch file </span></span>
<span id="cb15-21"><a href="#cb15-21"></a><span class="co">## we have to distinguish the module name</span></span>
<span id="cb15-22"><a href="#cb15-22"></a><span class="kw"><a href="https://rdrr.io/r/base/ifelse.html">ifelse</a></span>(<span class="kw"><a href="https://rdrr.io/r/base/Sys.info.html">Sys.info</a></span>()[<span class="st">"sysname"</span>]<span class="op">==</span><span class="st">"Windows"</span>, </span>
<span id="cb15-23"><a href="#cb15-23"></a>algo_keyword&lt;-<span class="st"> "EdgeExtraction.bat"</span>,</span>
<span id="cb15-24"><a href="#cb15-24"></a>algo_keyword&lt;-<span class="st"> "EdgeExtraction"</span>)</span>
<span id="cb15-25"><a href="#cb15-25"></a></span>
<span id="cb15-26"><a href="#cb15-26"></a><span class="co"># write it to a variable</span></span>
<span id="cb15-27"><a href="#cb15-27"></a>otb_algorithm&lt;-algo[algo[]<span class="op">==</span>algo_keyword]</span>
<span id="cb15-28"><a href="#cb15-28"></a><span class="co"># now create the command list</span></span>
<span id="cb15-29"><a href="#cb15-29"></a>algo_cmd&lt;-<span class="kw"><a href="../reference/parseOTBFunction.html">parseOTBFunction</a></span>(<span class="dt">algo =</span> otb_algorithm,<span class="dt">gili =</span> otblink)</span>
<span id="cb15-30"><a href="#cb15-30"></a></span>
<span id="cb15-31"><a href="#cb15-31"></a><span class="co">## define the current run arguments</span></span>
<span id="cb15-32"><a href="#cb15-32"></a>algo_cmd<span class="op">$</span><span class="st">`</span><span class="dt">-in</span><span class="st">`</span>&lt;-<span class="st"> </span><span class="kw"><a href="https://rdrr.io/r/base/file.path.html">file.path</a></span>(<span class="kw"><a href="https://rdrr.io/r/base/getwd.html">getwd</a></span>(),<span class="st">"4490600_5321400.tif"</span>)</span>
<span id="cb15-33"><a href="#cb15-33"></a>algo_cmd<span class="op">$</span><span class="st">`</span><span class="dt">-filter</span><span class="st">`</span>&lt;-<span class="st"> "sobel"</span></span>
<span id="cb15-34"><a href="#cb15-34"></a></span>
<span id="cb15-35"><a href="#cb15-35"></a><span class="co">## create out name</span></span>
<span id="cb15-36"><a href="#cb15-36"></a>outName&lt;-<span class="kw"><a href="https://rdrr.io/r/base/paste.html">paste0</a></span>(<span class="kw"><a href="https://rdrr.io/r/base/getwd.html">getwd</a></span>(),<span class="st">"/out"</span>,algo_cmd<span class="op">$</span><span class="st">`</span><span class="dt">-filter</span><span class="st">`</span>,<span class="st">".tif"</span>)</span>
<span id="cb15-37"><a href="#cb15-37"></a>algo_cmd<span class="op">$</span><span class="st">`</span><span class="dt">-out</span><span class="st">`</span>&lt;-<span class="st"> </span>outName</span>
<span id="cb15-38"><a href="#cb15-38"></a></span>
<span id="cb15-39"><a href="#cb15-39"></a><span class="co">## generate full command</span></span>
<span id="cb15-40"><a href="#cb15-40"></a>command&lt;-<span class="kw"><a href="https://rdrr.io/r/base/paste.html">paste</a></span>(<span class="kw"><a href="https://rdrr.io/r/base/paste.html">paste0</a></span>(path_OTB,<span class="st">"otbcli_"</span>,otb_algorithm,<span class="st">" "</span>),</span>
<span id="cb15-41"><a href="#cb15-41"></a>               <span class="kw"><a href="https://rdrr.io/r/base/paste.html">paste</a></span>(<span class="kw"><a href="https://rdrr.io/r/base/names.html">names</a></span>(algo_cmd),algo_cmd,<span class="dt">collapse =</span> <span class="st">" "</span>))</span>
<span id="cb15-42"><a href="#cb15-42"></a></span>
<span id="cb15-43"><a href="#cb15-43"></a><span class="co">## make the system call</span></span>
<span id="cb15-44"><a href="#cb15-44"></a><span class="kw"><a href="https://rdrr.io/r/base/system.html">system</a></span>(command,<span class="dt">intern =</span> <span class="ot">TRUE</span>)</span>
<span id="cb15-45"><a href="#cb15-45"></a></span>
<span id="cb15-46"><a href="#cb15-46"></a><span class="co">##create raster</span></span>
<span id="cb15-47"><a href="#cb15-47"></a>retStack&lt;-<span class="kw"><a href="https://rdrr.io/r/base/assign.html">assign</a></span>(outName,raster<span class="op">::</span><span class="kw"><a href="https://rdrr.io/pkg/raster/man/raster.html">raster</a></span>(outName))</span>
<span id="cb15-48"><a href="#cb15-48"></a></span>
<span id="cb15-49"><a href="#cb15-49"></a><span class="co">## plot raster</span></span>
<span id="cb15-50"><a href="#cb15-50"></a>raster<span class="op">::</span><span class="kw"><a href="https://rdrr.io/pkg/raster/man/plot.html">plot</a></span>(retStack)</span>
<span id="cb15-51"><a href="#cb15-51"></a></span>
<span id="cb15-52"><a href="#cb15-52"></a><span class="co">## End(Not run) </span></span></code></pre></div>
</div>
</div>
<div id="advanced-examples" class="section level1">
<h1 class="hasAnchor">
<a href="#advanced-examples" class="anchor"></a>Advanced examples</h1>
<p>A typical example is the usage of an already existing project database in <code>GRASS</code>. <code>GRASS</code> organizes all data in an internal file structure that is known as gisdbase folder, a mapset and one or more locations within this mapset. All raster and vector data is stored inside this structure and the organisation is performed by <code>GRASS</code>. So a typical task could be to work on data sets that are already stored in an existing <code>GRASS</code> structure</p>
<div id="creating-a-grass-project" class="section level2">
<h2 class="hasAnchor">
<a href="#creating-a-grass-project" class="anchor"></a>Creating a GRASS project</h2>
<p>First of all we need some real world data. In this this case the gridded <a href="https://www.zensus2011.de/EN/2011Census/2011_Census_node.html">2011 micro zensus</a> <a href="https://www.zensus2011.de/SharedDocs/Downloads/DE/Pressemitteilung/DemografischeGrunddaten/csv_Bevoelkerung_100m_Gitter.zip;jsessionid=294313DDBB57914D6636DE373897A3F2.2_cid389?__blob=publicationFile&amp;v=3">population data</a> of Germany. It has some nice aspects:</p>
<ul>
<li>It is provided in a typical authority format</li>
<li>It is big enough &gt;35 Mio points</li>
<li>It is pretty instructive for a lot of spatial analysis.</li>
</ul>
<p>We also have to download a <a href="https://www.zensus2011.de/SharedDocs/Downloads/DE/Pressemitteilung/DemografischeGrunddaten/Datensatzbeschreibung_Bevoelkerung_100m_Gitter.xlsx;jsessionid=294313DDBB57914D6636DE373897A3F2.2_cid389?__blob=publicationFile&amp;v=2">meta data description file</a> (excel sheet) for informations about projection and data concepts and so on.</p>
<div class="sourceCode" id="cb16"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb16-1"><a href="#cb16-1"></a> <span class="co"># we need some additional packages</span></span>
<span id="cb16-2"><a href="#cb16-2"></a> <span class="kw"><a href="https://rdrr.io/r/base/library.html">require</a></span>(link2GI)</span>
<span id="cb16-3"><a href="#cb16-3"></a> <span class="kw"><a href="https://rdrr.io/r/base/library.html">require</a></span>(curl)</span>
<span id="cb16-4"><a href="#cb16-4"></a></span>
<span id="cb16-5"><a href="#cb16-5"></a><span class="co"># first of all we create  a project folder structure </span></span>
<span id="cb16-6"><a href="#cb16-6"></a>  link2GI<span class="op">::</span><span class="kw"><a href="https://rdrr.io/pkg/link2GI/man/initProj.html">initProj</a></span>(<span class="dt">projRootDir =</span> <span class="kw"><a href="https://rdrr.io/r/base/paste.html">paste0</a></span>(<span class="kw"><a href="https://rdrr.io/r/base/tempfile.html">tempdir</a></span>(),<span class="st">"/link2GI_examples"</span>), </span>
<span id="cb16-7"><a href="#cb16-7"></a>                    <span class="dt">projFolders =</span>  <span class="kw"><a href="https://rdrr.io/r/base/c.html">c</a></span>(<span class="st">"run/"</span>),</span>
<span id="cb16-8"><a href="#cb16-8"></a>                    <span class="dt">path_prefix =</span> <span class="st">"path_"</span>,</span>
<span id="cb16-9"><a href="#cb16-9"></a>                    <span class="dt">global =</span> <span class="ot">TRUE</span>)</span>
<span id="cb16-10"><a href="#cb16-10"></a></span>
<span id="cb16-11"><a href="#cb16-11"></a><span class="co"># set runtime directory</span></span>
<span id="cb16-12"><a href="#cb16-12"></a>  <span class="kw"><a href="https://rdrr.io/r/base/getwd.html">setwd</a></span>(path_run)</span>
<span id="cb16-13"><a href="#cb16-13"></a></span>
<span id="cb16-14"><a href="#cb16-14"></a><span class="co"># get some typical authority generated data </span></span>
<span id="cb16-15"><a href="#cb16-15"></a>  url&lt;-<span class="st">"https://www.zensus2011.de/SharedDocs/Downloads/DE/Pressemitteilung/</span></span>
<span id="cb16-16"><a href="#cb16-16"></a><span class="st">        DemografischeGrunddaten/csv_Bevoelkerung_100m_Gitter.zip;</span></span>
<span id="cb16-17"><a href="#cb16-17"></a><span class="st">        jsessionid=294313DDBB57914D6636DE373897A3F2.2_cid389?__blob=publicationFile&amp;v=3"</span></span>
<span id="cb16-18"><a href="#cb16-18"></a> res &lt;-<span class="st"> </span>curl<span class="op">::</span><span class="kw"><a href="https://jeroen.cran.dev/curl/reference/curl_download.html">curl_download</a></span>(url, <span class="kw"><a href="https://rdrr.io/r/base/paste.html">paste0</a></span>(path_run,<span class="st">"testdata.zip"</span>))</span>
<span id="cb16-19"><a href="#cb16-19"></a></span>
<span id="cb16-20"><a href="#cb16-20"></a><span class="co"># unzip it</span></span>
<span id="cb16-21"><a href="#cb16-21"></a> <span class="kw"><a href="https://rdrr.io/r/utils/unzip.html">unzip</a></span>(res,<span class="dt">files =</span> <span class="kw"><a href="https://rdrr.io/r/base/grep.html">grep</a></span>(<span class="st">".csv"</span>, <span class="kw"><a href="https://rdrr.io/r/utils/unzip.html">unzip</a></span>(res,<span class="dt">list =</span> <span class="ot">TRUE</span>)<span class="op">$</span>Name,<span class="dt">value =</span> <span class="ot">TRUE</span>),</span>
<span id="cb16-22"><a href="#cb16-22"></a>       <span class="dt">junkpaths =</span> <span class="ot">TRUE</span>, <span class="dt">overwrite =</span> <span class="ot">TRUE</span>)</span>
<span id="cb16-23"><a href="#cb16-23"></a>fn &lt;-<span class="st"> </span><span class="kw"><a href="https://rdrr.io/r/base/list.files.html">list.files</a></span>(<span class="dt">pattern =</span> <span class="st">"[.]csv$"</span>, <span class="dt">path =</span> <span class="kw"><a href="https://rdrr.io/r/base/getwd.html">getwd</a></span>(), <span class="dt">full.names =</span> <span class="ot">TRUE</span>)</span></code></pre></div>
<p>After downloading the data we will use it for some demonstration stuff. If you have a look the data is nothing than x,y,z with assuming some projection information.</p>
<div class="sourceCode" id="cb17"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb17-1"><a href="#cb17-1"></a><span class="co"># get the filename</span></span>
<span id="cb17-2"><a href="#cb17-2"></a> </span>
<span id="cb17-3"><a href="#cb17-3"></a><span class="co"># fast read with data.table </span></span>
<span id="cb17-4"><a href="#cb17-4"></a> xyz &lt;-<span class="st"> </span>data.table<span class="op">::</span><span class="kw">fread</span>(<span class="kw"><a href="https://rdrr.io/r/base/paste.html">paste0</a></span>(path_run,<span class="st">"/Zensus_Bevoelkerung_100m-Gitter.csv"</span>))</span>
<span id="cb17-5"><a href="#cb17-5"></a></span>
<span id="cb17-6"><a href="#cb17-6"></a> <span class="kw"><a href="https://rdrr.io/r/utils/head.html">head</a></span>(xyz)</span></code></pre></div>
<p>We can easy rasterize this data as it is intentionally gridded data.that means we have in at a grid size of 100 by 100 meters a value.</p>
<div class="sourceCode" id="cb18"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb18-1"><a href="#cb18-1"></a> <span class="kw"><a href="https://rdrr.io/r/base/library.html">require</a></span>(RColorBrewer)</span>
<span id="cb18-2"><a href="#cb18-2"></a> <span class="kw"><a href="https://rdrr.io/r/base/library.html">require</a></span>(raster)</span>
<span id="cb18-3"><a href="#cb18-3"></a> <span class="kw"><a href="https://rdrr.io/r/base/library.html">require</a></span>(mapview)</span>
<span id="cb18-4"><a href="#cb18-4"></a></span>
<span id="cb18-5"><a href="#cb18-5"></a></span>
<span id="cb18-6"><a href="#cb18-6"></a><span class="co"># clean dataframe</span></span>
<span id="cb18-7"><a href="#cb18-7"></a> xyz &lt;-<span class="st"> </span>xyz[,<span class="op">-</span><span class="dv">1</span>]</span>
<span id="cb18-8"><a href="#cb18-8"></a></span>
<span id="cb18-9"><a href="#cb18-9"></a><span class="co"># rasterize it according to the projection </span></span>
<span id="cb18-10"><a href="#cb18-10"></a> r &lt;-<span class="st"> </span>raster<span class="op">::</span><span class="kw"><a href="https://rdrr.io/pkg/raster/man/rasterFromXYZ.html">rasterFromXYZ</a></span>(xyz,<span class="dt">crs =</span> sp<span class="op">::</span><span class="kw"><a href="https://rdrr.io/pkg/sp/man/CRS-class.html">CRS</a></span>(<span class="st">"+init=epsg:3035"</span>))</span>
<span id="cb18-11"><a href="#cb18-11"></a></span>
<span id="cb18-12"><a href="#cb18-12"></a></span>
<span id="cb18-13"><a href="#cb18-13"></a><span class="co"># map it</span></span>
<span id="cb18-14"><a href="#cb18-14"></a> p &lt;-<span class="st"> </span><span class="kw"><a href="https://rdrr.io/r/grDevices/colorRamp.html">colorRampPalette</a></span>(<span class="kw"><a href="https://rdrr.io/pkg/RColorBrewer/man/ColorBrewer.html">brewer.pal</a></span>(<span class="dv">8</span>, <span class="st">"Reds"</span>))</span>
<span id="cb18-15"><a href="#cb18-15"></a> <span class="co"># aet resolution to 1 sqkm</span></span>
<span id="cb18-16"><a href="#cb18-16"></a> mapview<span class="op">::</span><span class="kw"><a href="https://rdrr.io/pkg/mapview/man/mapviewOptions.html">mapviewOptions</a></span>(<span class="dt">mapview.maxpixels =</span> r<span class="op">@</span>ncols<span class="op">*</span>r<span class="op">@</span>nrows<span class="op">/</span><span class="dv">10</span>)</span>
<span id="cb18-17"><a href="#cb18-17"></a> mapview<span class="op">::</span><span class="kw"><a href="https://rdrr.io/pkg/mapview/man/mapView.html">mapview</a></span>(r, <span class="dt">col.regions =</span> p, </span>
<span id="cb18-18"><a href="#cb18-18"></a>                  <span class="dt">at =</span> <span class="kw"><a href="https://rdrr.io/r/base/c.html">c</a></span>(<span class="op">-</span><span class="dv">1</span>,<span class="dv">10</span>,<span class="dv">25</span>,<span class="dv">50</span>,<span class="dv">100</span>,<span class="dv">500</span>,<span class="dv">1000</span>,<span class="dv">2500</span>), </span>
<span id="cb18-19"><a href="#cb18-19"></a>                  <span class="dt">legend =</span> <span class="ot">TRUE</span>)</span></code></pre></div>
<p>So far nothing new. Now we create a new but permanent <code>GRASS</code> gisbase using the spatial parameters from the raster object. As you know the <code>linkGRASS7</code> function performs a full search for one or more than one existing <code>GRASS</code> installations. If a valid <code>GRASS</code> installation exists all parameter are setup und the package <code>rgrass7</code> is linked.</p>
<p>Due to the fact that the <code>gisdbase_exist</code> is by default set to FALSE it will create a new structure according to the <code>R</code> object.</p>
<div class="sourceCode" id="cb19"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb19-1"><a href="#cb19-1"></a><span class="kw"><a href="https://rdrr.io/r/base/library.html">require</a></span>(link2GI)</span>
<span id="cb19-2"><a href="#cb19-2"></a><span class="co"># initialize GRASS and set up a permanent structure  </span></span>
<span id="cb19-3"><a href="#cb19-3"></a>link2GI<span class="op">::</span><span class="kw"><a href="https://rdrr.io/pkg/link2GI/man/linkGRASS7.html">linkGRASS7</a></span>(<span class="dt">x =</span> r, </span>
<span id="cb19-4"><a href="#cb19-4"></a>                    <span class="dt">gisdbase =</span> <span class="kw"><a href="https://rdrr.io/r/base/paste.html">paste0</a></span>(<span class="kw"><a href="https://rdrr.io/r/base/tempfile.html">tempdir</a></span>(),<span class="st">"/link2GI_examples"</span>),</span>
<span id="cb19-5"><a href="#cb19-5"></a>                    <span class="dt">location =</span> <span class="st">"microzensus2011"</span>)   </span></code></pre></div>
<p>Finally we can now import the data to the <code>GRASS</code> gisdbase using the <code>rgass7</code> package functionality.</p>
<p>First we must convert the raster object to <code>GeoTIFF</code> file. Any <code>GDAL</code> format is possible but <code>GeoTIFF</code> is very common and stable.</p>
<div class="sourceCode" id="cb20"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb20-1"><a href="#cb20-1"></a><span class="kw"><a href="https://rdrr.io/r/base/library.html">require</a></span>(raster)</span>
<span id="cb20-2"><a href="#cb20-2"></a><span class="kw"><a href="https://rdrr.io/r/base/library.html">require</a></span>(rgrass7)</span>
<span id="cb20-3"><a href="#cb20-3"></a></span>
<span id="cb20-4"><a href="#cb20-4"></a><span class="co"># write it to geotiff</span></span>
<span id="cb20-5"><a href="#cb20-5"></a>  raster<span class="op">::</span><span class="kw"><a href="https://rdrr.io/pkg/raster/man/writeRaster.html">writeRaster</a></span>(r, <span class="kw"><a href="https://rdrr.io/r/base/paste.html">paste0</a></span>(path_run,<span class="st">"/Zensus_Bevoelkerung_100m-Gitter.tif"</span>), </span>
<span id="cb20-6"><a href="#cb20-6"></a>                      <span class="dt">overwrite =</span> <span class="ot">TRUE</span>)</span>
<span id="cb20-7"><a href="#cb20-7"></a></span>
<span id="cb20-8"><a href="#cb20-8"></a><span class="co"># import raster to GRASS</span></span>
<span id="cb20-9"><a href="#cb20-9"></a>rgrass7<span class="op">::</span><span class="kw"><a href="https://rdrr.io/pkg/rgrass7/man/execGRASS.html">execGRASS</a></span>(<span class="st">'r.external'</span>,</span>
<span id="cb20-10"><a href="#cb20-10"></a>                   <span class="dt">flags=</span><span class="kw"><a href="https://rdrr.io/r/base/c.html">c</a></span>(<span class="st">'o'</span>,<span class="st">"overwrite"</span>,<span class="st">"quiet"</span>),</span>
<span id="cb20-11"><a href="#cb20-11"></a>                   <span class="dt">input=</span><span class="kw"><a href="https://rdrr.io/r/base/paste.html">paste0</a></span>(path_run,<span class="st">"/Zensus_Bevoelkerung_100m-Gitter.tif"</span>),</span>
<span id="cb20-12"><a href="#cb20-12"></a>                   <span class="dt">output=</span><span class="st">"Zensus_Bevoelkerung_100m_Gitter"</span>,</span>
<span id="cb20-13"><a href="#cb20-13"></a>                   <span class="dt">band=</span><span class="dv">1</span>)</span>
<span id="cb20-14"><a href="#cb20-14"></a></span>
<span id="cb20-15"><a href="#cb20-15"></a><span class="co"># check imported data set</span></span>
<span id="cb20-16"><a href="#cb20-16"></a>rgrass7<span class="op">::</span><span class="kw"><a href="https://rdrr.io/pkg/rgrass7/man/execGRASS.html">execGRASS</a></span>(<span class="st">'r.info'</span>,</span>
<span id="cb20-17"><a href="#cb20-17"></a>                   <span class="dt">map =</span> <span class="st">"Zensus_Bevoelkerung_100m_Gitter"</span>) </span></code></pre></div>
<p>Let’s do now the same import as a vector data set. First we create a <code>sf</code> object. Please note this will take quite a while.</p>
<div class="sourceCode" id="cb21"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb21-1"><a href="#cb21-1"></a> xyz_sf =<span class="st"> </span><span class="kw"><a href="https://rdrr.io/pkg/sf/man/st_as_sf.html">st_as_sf</a></span>(xyz,</span>
<span id="cb21-2"><a href="#cb21-2"></a>                    <span class="dt">coords =</span> <span class="kw"><a href="https://rdrr.io/r/base/c.html">c</a></span>(<span class="st">"x_mp_100m"</span>, <span class="st">"y_mp_100m"</span>),</span>
<span id="cb21-3"><a href="#cb21-3"></a>                    <span class="dt">crs =</span> <span class="dv">3035</span>,</span>
<span id="cb21-4"><a href="#cb21-4"></a>                    <span class="dt">agr =</span> <span class="st">"constant"</span>)</span>
<span id="cb21-5"><a href="#cb21-5"></a></span>
<span id="cb21-6"><a href="#cb21-6"></a><span class="co">#map points</span></span>
<span id="cb21-7"><a href="#cb21-7"></a> sf<span class="op">::</span><span class="kw"><a href="https://rdrr.io/pkg/sf/man/plot.html">plot_sf</a></span>(xyz_sf)</span></code></pre></div>
<p>The <code>GRASS</code> gisdbase already exists. So we pass <code>linkGRASS7</code> the argument <code>gisdbase_exist=TRUE</code> and import the xyz data as generic GRASS vector points.</p>
<div class="sourceCode" id="cb22"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb22-1"><a href="#cb22-1"></a> <span class="kw"><a href="https://rdrr.io/r/base/library.html">require</a></span>(sf)</span>
<span id="cb22-2"><a href="#cb22-2"></a> <span class="kw"><a href="https://rdrr.io/r/base/library.html">require</a></span>(sp)</span>
<span id="cb22-3"><a href="#cb22-3"></a> <span class="kw"><a href="https://rdrr.io/r/base/library.html">require</a></span>(link2GI)</span>
<span id="cb22-4"><a href="#cb22-4"></a> </span>
<span id="cb22-5"><a href="#cb22-5"></a>  <span class="kw">sf2gvec</span>(<span class="dt">x =</span>  xyz_sf,</span>
<span id="cb22-6"><a href="#cb22-6"></a>           <span class="dt">obj_name =</span> <span class="st">"Zensus_Bevoelkerung_100m_"</span>,</span>
<span id="cb22-7"><a href="#cb22-7"></a>           <span class="dt">gisdbase =</span> <span class="kw"><a href="https://rdrr.io/r/base/paste.html">paste0</a></span>(<span class="kw"><a href="https://rdrr.io/r/base/tempfile.html">tempdir</a></span>(),<span class="st">"/link2GI_examples"</span>),</span>
<span id="cb22-8"><a href="#cb22-8"></a>           <span class="dt">location =</span> <span class="st">"microzensus2011"</span>,</span>
<span id="cb22-9"><a href="#cb22-9"></a>           <span class="dt">gisdbase_exist =</span> <span class="ot">TRUE</span>)</span>
<span id="cb22-10"><a href="#cb22-10"></a> </span>
<span id="cb22-11"><a href="#cb22-11"></a><span class="co"># check imported data set</span></span>
<span id="cb22-12"><a href="#cb22-12"></a>rgrass7<span class="op">::</span><span class="kw"><a href="https://rdrr.io/pkg/rgrass7/man/execGRASS.html">execGRASS</a></span>(<span class="st">'v.info'</span>, <span class="dt">map =</span> <span class="st">"Zensus_Bevoelkerung_100m_"</span>) </span></code></pre></div>
</div>
<div id="usecases-presented-on-the-geostat-august-2018" class="section level2">
<h2 class="hasAnchor">
<a href="#usecases-presented-on-the-geostat-august-2018" class="anchor"></a>Usecases presented on the GEOSTAT August 2018</h2>
<p>During the <a href="http://opengeohub.org/node/146">GEOSTAT 2018</a> in Prague some more complex usescases has been <a href="https://htmlpreview.github.io/?https://github.com/gisma/link2gi2018/blob/master/link2gi2018.html">presented</a>.</p>
<div id="find-slides-and-materials" class="section level3">
<h3 class="hasAnchor">
<a href="#find-slides-and-materials" class="anchor"></a>Find slides and materials</h3>
<p><a href="https://htmlpreview.github.io/?https://github.com/gisma/link2gi2018/blob/master/link2gi2018.html">GEOSTAT 2018</a> presentation slides.</p>
<p><a href="https://github.com/gisma/link2gi2018">link2GI GEOSTAT</a> github repository.</p>
</div>
<div id="prerequisites" class="section level3">
<h3 class="hasAnchor">
<a href="#prerequisites" class="anchor"></a>Prerequisites</h3>
<p>Please check the R dependencies:</p>
<div class="sourceCode" id="cb23"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb23-1"><a href="#cb23-1"></a><span class="kw"><a href="https://rdrr.io/r/utils/install.packages.html">install.packages</a></span>(<span class="kw"><a href="https://rdrr.io/r/base/c.html">c</a></span>(<span class="st">"sf"</span>, <span class="st">"raster"</span>,  <span class="st">"rgdal"</span>, <span class="st">"gdalUtils"</span>, </span>
<span id="cb23-2"><a href="#cb23-2"></a>                   <span class="st">"tools"</span>, <span class="st">"rgrass7"</span>, <span class="st">"sp"</span>, <span class="st">"RSAGA"</span>, <span class="st">"link2GI"</span>))</span>
<span id="cb23-3"><a href="#cb23-3"></a></span>
<span id="cb23-4"><a href="#cb23-4"></a><span class="co"># for the Canopy height model usecase you need to install uavRst</span></span>
<span id="cb23-5"><a href="#cb23-5"></a>devtools<span class="op">::</span><span class="kw"><a href="https://rdrr.io/pkg/devtools/man/remote-reexports.html">install_github</a></span>(<span class="st">"gisma/uavRst"</span>, <span class="dt">ref =</span> <span class="st">"master"</span>)</span></code></pre></div>
<p>In addition you need at least one installation of the following GIS software.</p>
<ul>
<li>For <code>GRASS</code>- and <code>SAGA-GIS</code> follow the <a href="https://github.com/jannes-m/RQGIS/blob/master/vignettes/install_guide.Rmd">RQGIS installation instructions</a> as provided by Jannes Muenchow. For standalone GRASS you may have a look at the the <a href="https://gitlab.com/veroandreo/grass-gis-geostat-2018">geostat2018 instructions</a> as provided by Veronica Andreos.</li>
<li>For installing the <code>Orfeo Toolbox</code>, please follow the OTB cookbook <a href="https://www.orfeo-toolbox.org/CookBook/Installation.html">installation instructions</a>.</li>
</ul>
<p>Please download the data and scripts for the exercises.</p>
<p><strong>PLEASE NOTE:</strong></p>
<p>If you run the following code you will create the folder <em>link2gi-master</em> in your <strong>home folder</strong>. During the tutorial it is assumed to be the root folder.</p>
<div class="sourceCode" id="cb24"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb24-1"><a href="#cb24-1"></a>url &lt;-<span class="st"> "https://github.com/gisma/link2gi2018/archive/master.zip"</span></span>
<span id="cb24-2"><a href="#cb24-2"></a>res &lt;-<span class="st"> </span>curl<span class="op">::</span><span class="kw"><a href="https://jeroen.cran.dev/curl/reference/curl_download.html">curl_download</a></span>(url, <span class="kw"><a href="https://rdrr.io/r/base/paste.html">paste0</a></span>(<span class="kw"><a href="https://rdrr.io/pkg/raster/man/rasterOptions.html">tmpDir</a></span>(),<span class="st">"master.zip"</span>))</span>
<span id="cb24-3"><a href="#cb24-3"></a>utils<span class="op">::</span><span class="kw"><a href="https://rdrr.io/r/utils/unzip.html">unzip</a></span>(<span class="dt">zipfile =</span> res, <span class="dt">exdir =</span> <span class="st">"~"</span>)</span></code></pre></div>
</div>
</div>
<div id="the-examples" class="section level2">
<h2 class="hasAnchor">
<a href="#the-examples" class="anchor"></a>The examples</h2>
<ul>
<li><p>Basic usage of SAGA and OTB calls - <a href="https://github.com/gisma/link2gi2018/blob/master/R/usecases/saga-otb/useCaseSAGA-OTB.R">SAGA &amp; OTB basic usecase</a></p></li>
<li><p>Wrapping a <a href="https://neteler.gitlab.io/grass-gis-analysis/02_grass-gis_ecad_analysis/">GRASS GIS example</a> of Marcus Neteler as presented on GEOSTAT 2018 - <a href="https://github.com/gisma/link2gi2018/blob/master/R/usecases/grass/useCaseGRASS-Neteler2018.R">Analysing the ECA&amp;D climatic data - reloaded</a></p></li>
<li><p>Performing a GRASS based cost analysis on a huge cost raster - <a href="https://github.com/gisma/link2gi2018/blob/master/R/usecases/cost-analysis/useCaseBeetle.R">Beetle spread over high asia</a></p></li>
<li><p>Deriving a canopy height model using a mixed API approach - <a href="https://github.com/gisma/link2gi2018/blob/master/R/usecases/uav-pc/useCaseCHM.R">Canopy Height Model from UAV derived point clouds</a></p></li>
</ul>
</div>
</div>
  </div>

  <div class="col-md-3 hidden-xs hidden-sm" id="sidebar">

        <div id="tocnav">
      <h2 class="hasAnchor">
<a href="#tocnav" class="anchor"></a>Contents</h2>
      <ul class="nav nav-pills nav-stacked">
<li><a href="#what-is-link2gi">What is link2GI?</a></li>
      <li><a href="#why-link2gi-now">Why link2GI now?</a></li>
      <li><a href="#what-means-linking">What means linking?</a></li>
      <li>
<a href="#usage-of-the-link2gi-package---basic-examples">Usage of the link2GI package - Basic Examples</a><ul class="nav nav-pills nav-stacked">
<li><a href="#brute-force-search-usage">Brute force search usage</a></li>
      <li><a href="#setting-up-project-structures">Setting up project structures</a></li>
      <li><a href="#linksaga---locate-and-set-up-saga-api-bindings">linkSAGA - Locate and set up ‘SAGA’ API bindings</a></li>
      <li><a href="#linkgrass7---locate-and-set-up-grass-7-api-bindings">linkGRASS7 - Locate and set up ‘GRASS 7’ API bindings</a></li>
      <li><a href="#a-typical-usecase-for-the-orfeo-toolbox-wrapper">A typical usecase for the Orfeo Toolbox wrapper</a></li>
      </ul>
</li>
      <li>
<a href="#advanced-examples">Advanced examples</a><ul class="nav nav-pills nav-stacked">
<li><a href="#creating-a-grass-project">Creating a GRASS project</a></li>
      <li><a href="#usecases-presented-on-the-geostat-august-2018">Usecases presented on the GEOSTAT August 2018</a></li>
      <li><a href="#the-examples">The examples</a></li>
      </ul>
</li>
      </ul>
</div>
      </div>

</div>



      <footer><div class="copyright">
  <p>Developed by Chris Reudenbach.</p>
</div>

<div class="pkgdown">
  <p>Site built with <a href="https://pkgdown.r-lib.org/">pkgdown</a> 1.4.1.</p>
</div>

      </footer>
</div>

  


  </body>
</html>
