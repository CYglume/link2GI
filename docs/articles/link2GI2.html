<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<meta name="description" content="link2GI">
<title>Basic usage of link2GI • link2GI</title>
<script src="../deps/jquery-3.6.0/jquery-3.6.0.min.js"></script><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<link href="../deps/bootstrap-5.3.1/bootstrap.min.css" rel="stylesheet">
<script src="../deps/bootstrap-5.3.1/bootstrap.bundle.min.js"></script><link href="../deps/JetBrains_Mono-0.4.9/font.css" rel="stylesheet">
<!-- Font Awesome icons --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/all.min.css" integrity="sha256-mmgLkCYLUQbXn0B1SRqzHar6dCnv9oZFPEC1g1cwlkk=" crossorigin="anonymous">
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/v4-shims.min.css" integrity="sha256-wZjR52fzng1pJHwx4aV2AO3yyTOXrcDW7jBpJtTwVxw=" crossorigin="anonymous">
<!-- bootstrap-toc --><script src="https://cdn.jsdelivr.net/gh/afeld/bootstrap-toc@v1.0.1/dist/bootstrap-toc.min.js" integrity="sha256-4veVQbu7//Lk5TSmc7YV48MxtMy98e26cf5MrgZYnwo=" crossorigin="anonymous"></script><!-- headroom.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/headroom.min.js" integrity="sha256-AsUX4SJE1+yuDu5+mAVzJbuYNPHj/WroHuZ8Ir/CkE0=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/jQuery.headroom.min.js" integrity="sha256-ZX/yNShbjqsohH1k95liqY9Gd8uOiE1S4vZc+9KQ1K4=" crossorigin="anonymous"></script><!-- clipboard.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.11/clipboard.min.js" integrity="sha512-7O5pXpc0oCRrxk8RUfDYFgn0nO1t+jLuIOQdOMRp4APB7uZ4vSjspzp5y6YDtDs4VzUSTbWzBFZ/LKJhnyFOKw==" crossorigin="anonymous" referrerpolicy="no-referrer"></script><!-- search --><script src="https://cdnjs.cloudflare.com/ajax/libs/fuse.js/6.4.6/fuse.js" integrity="sha512-zv6Ywkjyktsohkbp9bb45V6tEMoWhzFzXis+LrMehmJZZSys19Yxf1dopHx7WzIKxr5tK2dVcYmaCk2uqdjF4A==" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/autocomplete.js/0.38.0/autocomplete.jquery.min.js" integrity="sha512-GU9ayf+66Xx2TmpxqJpliWbT5PiGYxpaG8rfnBEk1LL8l1KGkRShhngwdXK1UgqhAzWpZHSiYPc09/NwDQIGyg==" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mark.js/8.11.1/mark.min.js" integrity="sha512-5CYOlHXGh6QpOFA/TeTylKLWfB3ftPsde7AnmhuitiTX4K5SqCLBeKro6sPS8ilsz1Q4NRx3v8Ko2IBiszzdww==" crossorigin="anonymous"></script><!-- pkgdown --><script src="../pkgdown.js"></script><meta property="og:title" content="Basic usage of link2GI">
<meta property="og:description" content="link2GI">
<!-- mathjax --><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/config/TeX-AMS-MML_HTMLorMML.js" integrity="sha256-84DKXVJXs0/F8OTMzX4UR909+jtl4G7SPypPavF+GfA=" crossorigin="anonymous"></script><!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]-->
</head>
<body>
    <a href="#main" class="visually-hidden-focusable">Skip to contents</a>
    

    <nav class="navbar fixed-top navbar-dark navbar-expand-lg bg-primary" data-bs-theme="dark"><div class="container">
    
    <a class="navbar-brand me-2" href="../index.html">link2GI</a>

    <small class="nav-text text-muted me-auto" data-bs-toggle="tooltip" data-bs-placement="bottom" title="">0.6-2</small>

    
    <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbar" aria-controls="navbar" aria-expanded="false" aria-label="Toggle navigation">
      <span class="navbar-toggler-icon"></span>
    </button>

    <div id="navbar" class="collapse navbar-collapse ms-3">
      <ul class="navbar-nav me-auto">
<li class="nav-item">
  <a class="nav-link" href="../reference/index.html">Reference</a>
</li>
<li class="active nav-item dropdown">
  <a href="#" class="nav-link dropdown-toggle" data-bs-toggle="dropdown" role="button" aria-expanded="false" aria-haspopup="true" id="dropdown-articles">Articles</a>
  <div class="dropdown-menu" aria-labelledby="dropdown-articles">
    <a class="dropdown-item" href="../articles/link2GI1.html">Link GI to R</a>
    <a class="dropdown-item" href="../articles/link2GI2.html">Basic usage of link2GI</a>
    <a class="dropdown-item" href="../articles/link2GI3.html">GRASS application for real world big data</a>
    <a class="dropdown-item" href="../articles/link2GI4.html">OTB Wrapper</a>
    <a class="dropdown-item" href="../articles/link2GI5.html">Reproducible project structures</a>
    <a class="dropdown-item" href="../articles/link2GI6.html">Installation guide for link2GI related Software</a>
  </div>
</li>
<li class="nav-item">
  <a class="nav-link" href="../news/index.html">Changelog</a>
</li>
      </ul>
<form class="form-inline my-2 my-lg-0" role="search">
        <input type="search" class="form-control me-sm-2" aria-label="Toggle navigation" name="search-input" data-search-index="../search.json" id="search-input" placeholder="Search for" autocomplete="off">
</form>

      <ul class="navbar-nav">
<li class="nav-item">
  <a class="external-link nav-link" href="https://github.com/r-spatial/link2GI/" aria-label="github">
    <span class="fab fa fab fa-github fa-lg"></span>
     
  </a>
</li>
      </ul>
</div>

    
  </div>
</nav><div class="container template-article">




<div class="row">
  <main id="main" class="col-md-9"><div class="page-header">
      <img src="" class="logo" alt=""><h1>Basic usage of link2GI</h1>
                        <h4 data-toc-skip class="author">Chris
Reudenbach</h4>
            
            <h4 data-toc-skip class="date">2024-10-28</h4>
      
      <small class="dont-index">Source: <a href="https://github.com/r-spatial/link2GI/blob/HEAD/vignettes/link2GI2.Rmd" class="external-link"><code>vignettes/link2GI2.Rmd</code></a></small>
      <div class="d-none name"><code>link2GI2.Rmd</code></div>
    </div>

    
    
<div class="section level2">
<h2 id="brute-force-search">Brute force search<a class="anchor" aria-label="anchor" href="#brute-force-search"></a>
</h2>
<p>Automatic searching and finding of installed GIS software binaries is
done by the <code>find</code> functions. Depending on your operating
system and the number of installed versions you will get a data frame
with the binary and module folders.</p>
<div class="sourceCode" id="cb1"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># find all SAGA GIS installations at the default search location</span></span>
<span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">require</a></span><span class="op">(</span><span class="va"><a href="https://github.com/r-spatial/link2GI/" class="external-link">link2GI</a></span><span class="op">)</span></span>
<span><span class="va">saga</span> <span class="op">&lt;-</span> <span class="fu">link2GI</span><span class="fu">::</span><span class="fu"><a href="../reference/findSAGA.html">findSAGA</a></span><span class="op">(</span><span class="op">)</span></span>
<span><span class="va">saga</span></span></code></pre></div>
<p>Same with <code>GRASS</code> and <code>OTB</code></p>
<div class="sourceCode" id="cb2"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">require</a></span><span class="op">(</span><span class="va"><a href="https://github.com/r-spatial/link2GI/" class="external-link">link2GI</a></span><span class="op">)</span></span>
<span><span class="va">grass</span> <span class="op">&lt;-</span> <span class="fu">link2GI</span><span class="fu">::</span><span class="fu"><a href="../reference/findGRASS.html">findGRASS</a></span><span class="op">(</span><span class="op">)</span></span>
<span><span class="va">grass</span></span>
<span><span class="va">otb</span> <span class="op">&lt;-</span> <span class="fu">link2GI</span><span class="fu">::</span><span class="fu"><a href="../reference/findOTB.html">findOTB</a></span><span class="op">(</span>searchLocation <span class="op">=</span> <span class="st">"~/"</span><span class="op">)</span></span>
<span><span class="va">otb</span></span></code></pre></div>
<p>The `find’ functions provide an overview of the installed software.
These functions do not create links or change settings.</p>
</div>
<div class="section level2">
<h2 id="setting-up-project-structures">Setting up project structures<a class="anchor" aria-label="anchor" href="#setting-up-project-structures"></a>
</h2>
<p>If you are just calling link2GI on the fly, i.e. for a single
temporary operation, there is no need to set up folders and project
structures. If you are working on a more complex project, it might be
helpful to have a fixed structure. The same goes for existing
<code>GRASS</code> projects that need to be in specific mapsets and
locations.</p>
<p>A simple (you can call it dirty) approach is the
<code>initProj</code> function, which creates folder structures (if not
existing) and sets global variables (if desired) containing the paths as
strings.</p>
<div class="sourceCode" id="cb3"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">require</a></span><span class="op">(</span><span class="va"><a href="https://github.com/r-spatial/link2GI/" class="external-link">link2GI</a></span><span class="op">)</span></span>
<span><span class="va">dirs</span> <span class="op">=</span> <span class="fu">link2GI</span><span class="fu">::</span><span class="fu"><a href="../reference/createFolders.html">createFolders</a></span><span class="op">(</span>root_folder <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/tempfile.html" class="external-link">tempdir</a></span><span class="op">(</span><span class="op">)</span>,</span>
<span>                                folders <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"data/"</span>,</span>
<span>                                            <span class="st">"data/level0/"</span>,</span>
<span>                                            <span class="st">"data/level1/"</span>,</span>
<span>                                            <span class="st">"output/"</span>,</span>
<span>                                            <span class="st">"run/"</span>,</span>
<span>                                            <span class="st">"fun/"</span><span class="op">)</span></span>
<span>                                <span class="op">)</span></span>
<span><span class="va">dirs</span></span></code></pre></div>
</div>
<div class="section level2">
<h2 id="linksaga---find-and-set-up-saga-api-bindings">linkSAGA - Find and set up ‘SAGA’ API bindings<a class="anchor" aria-label="anchor" href="#linksaga---find-and-set-up-saga-api-bindings"></a>
</h2>
<p>In the past it was quite tedious to link the correct
<code>SAGA GIS</code> version. Since version 1.x.x of <code>RSAGA</code>
things are much better. The new <code><a href="https://rdrr.io/pkg/RSAGA/man/rsaga.env.html" class="external-link">RSAGA::rsaga.env()</a></code> function
is to get the first <code>RSAGA</code> version in the search path. It is
also possible to pass the version number as shown below. Storing the
result in appropriate variables will even allow you to easily switch
between different <code>SAGA GIS</code> installations.</p>
</div>
<div class="section level2">
<h2 id="linkgrass---find-and-set-up-grass-78-api-bindings">linkGRASS - Find and set up GRASS 7/8 API bindings<a class="anchor" aria-label="anchor" href="#linkgrass---find-and-set-up-grass-78-api-bindings"></a>
</h2>
<p><code>linkGRASS</code> initializes the session environment and system
paths for easy access to <code>GRASS GIS 7.x./8.x</code>. The correct
setting of spatial and projection parameters is done automatically
either by using an existing and valid <code>raster</code> or
<code>terra</code>, <code>sp</code> or <code>sf</code> object or
manually by providing a list of minimum required parameters. These
properties are used to initialize either a temporary or a permanent
<code>rgrass</code> environment, including the correct
<code>GRASS 7/8</code> database structure. If you do not specify any of
the above, <code>linkGRASS</code> will create an EPSG:4326 worldwide
site.</p>
<p>The most time consuming part on Windows systems is the search
process. This can easily take 10 minutes or more. To speed up this
process, you can also provide a correct parameter set. The best way to
do this is to call <code>findGRASS</code> manually. Then call
<code>linkGRASS</code> with the returned version arguments of your
choice.</p>
<p>The <code>linkGRASS</code> function tries to find all valid
<code>GRASS GIS</code> binaries by analyzing the <code>GRASS GIS</code>
startup script files. After identifying the <code>GRASS GIS</code>
binaries, all necessary system variables and settings are generated and
passed to a temporary <code>R</code> environment.</p>
<p>If you have more than one valid installation and run
<code>linkGRASS</code> with the arguments
<code>select_ver = TRUE</code>, you will be asked to select one.</p>
<div class="section level4">
<h4 id="standard-full-search-usage">Standard full search usage<a class="anchor" aria-label="anchor" href="#standard-full-search-usage"></a>
</h4>
<p>The most common use of <code>GRASS</code> is for a single call or
algorithm. The user is not interested in setting all the parameters.
linGRASS7(georeferenced-dataset)<code>does an automatic search and finds all the</code>GRASS<code>binaries using the georeferenced-dataset object for spatial referencing and other necessary settings.  **NOTE:** This is the highly recommended linking procedure for all on-the-fly invocations of</code>GRASS<code>. Please also note that if more than one</code>GRASS`
installation is found, the one with the highest version number is
automatically selected.</p>
<p>Take a look at the following examples, which show a typical call for
the well-known <code>sp</code> and <code>sf</code> vector data
objects.</p>
<p>Starting with <code>sp</code>.</p>
<div class="sourceCode" id="cb4"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># get meuse data as sp object and link it temporary to GRASS</span></span>
<span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">require</a></span><span class="op">(</span><span class="va"><a href="https://github.com/r-spatial/link2GI/" class="external-link">link2GI</a></span><span class="op">)</span></span>
<span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">require</a></span><span class="op">(</span><span class="va"><a href="https://r-spatial.github.io/sf/" class="external-link">sf</a></span><span class="op">)</span></span>
<span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">require</a></span><span class="op">(</span><span class="va"><a href="https://github.com/edzer/sp/" class="external-link">sp</a></span><span class="op">)</span></span>
<span><span class="va">crs</span> <span class="op">=</span> <span class="fl">28992</span></span>
<span><span class="co"># get data </span></span>
<span><span class="fu"><a href="https://rdrr.io/r/utils/data.html" class="external-link">data</a></span><span class="op">(</span><span class="va">meuse</span><span class="op">)</span> </span>
<span><span class="va">meuse_sf</span> <span class="op">=</span> <span class="fu"><a href="https://r-spatial.github.io/sf/reference/st_as_sf.html" class="external-link">st_as_sf</a></span><span class="op">(</span><span class="va">meuse</span>, coords <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"x"</span>, <span class="st">"y"</span><span class="op">)</span>, crs <span class="op">=</span> <span class="va">crs</span>, agr <span class="op">=</span> <span class="st">"constant"</span><span class="op">)</span></span>
<span></span>
<span><span class="co"># Automatic search and find of GRASS binaries</span></span>
<span><span class="co"># using the meuse sp data object for spatial referencing</span></span>
<span><span class="co"># This is the highly recommended linking procedure for on the fly jobs</span></span>
<span><span class="co"># NOTE: if more than one GRASS installation is found the highest version will be selected</span></span>
<span></span>
<span><span class="fu"><a href="../reference/linkGRASS.html">linkGRASS</a></span><span class="op">(</span><span class="va">meuse_sf</span>,epsg <span class="op">=</span> <span class="va">crs</span><span class="op">)</span></span></code></pre></div>
<p>Now do the same with <code>sf</code> based data.</p>
<div class="sourceCode" id="cb5"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span> <span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">require</a></span><span class="op">(</span><span class="va"><a href="https://github.com/r-spatial/link2GI/" class="external-link">link2GI</a></span><span class="op">)</span></span>
<span> <span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">require</a></span><span class="op">(</span><span class="va"><a href="https://r-spatial.github.io/sf/" class="external-link">sf</a></span><span class="op">)</span></span>
<span></span>
<span> <span class="co"># get  data</span></span>
<span> <span class="va">nc</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://r-spatial.github.io/sf/reference/st_read.html" class="external-link">st_read</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/system.file.html" class="external-link">system.file</a></span><span class="op">(</span><span class="st">"shape/nc.shp"</span>, package<span class="op">=</span><span class="st">"sf"</span><span class="op">)</span><span class="op">)</span></span>
<span><span class="fu">terra</span><span class="fu">::</span><span class="fu"><a href="https://rspatial.github.io/terra/reference/crs.html" class="external-link">crs</a></span><span class="op">(</span><span class="va">nc</span><span class="op">)</span></span>
<span> <span class="co"># Automatic search and find of GRASS binaries</span></span>
<span> <span class="co"># using the nc sf data object for spatial referencing</span></span>
<span> <span class="co"># This is the highly recommended linking procedure for on the fly jobs</span></span>
<span> <span class="co"># NOTE: if more than one GRASS installation is found the highest version will be selected</span></span>
<span> </span>
<span> <span class="va">grass</span><span class="op">&lt;-</span><span class="fu"><a href="../reference/linkGRASS.html">linkGRASS</a></span><span class="op">(</span><span class="va">nc</span>,returnPaths <span class="op">=</span> <span class="cn">TRUE</span><span class="op">)</span></span></code></pre></div>
<p>The second most common situation is to use an existing
<code>GRASS</code> site and project, either with existing data sets or
manually provided parameters.</p>
<div class="sourceCode" id="cb6"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span>  <span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://github.com/r-spatial/link2GI/" class="external-link">link2GI</a></span><span class="op">)</span></span>
<span> <span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">require</a></span><span class="op">(</span><span class="va"><a href="https://r-spatial.github.io/sf/" class="external-link">sf</a></span><span class="op">)</span></span>
<span></span>
<span> <span class="co"># proj folders</span></span>
<span> <span class="va">root_folder</span><span class="op">&lt;-</span><span class="fu"><a href="https://rdrr.io/r/base/tempfile.html" class="external-link">tempdir</a></span><span class="op">(</span><span class="op">)</span></span>
<span> <span class="va">paths</span><span class="op">&lt;-</span><span class="fu">link2GI</span><span class="fu">::</span><span class="fu"><a href="../reference/createFolders.html">createFolders</a></span><span class="op">(</span>root_folder <span class="op">=</span> <span class="va">root_folder</span>,</span>
<span>                          folders <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"project1/"</span><span class="op">)</span><span class="op">)</span></span>
<span></span>
<span> <span class="co"># get  data</span></span>
<span> <span class="va">nc</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://r-spatial.github.io/sf/reference/st_read.html" class="external-link">st_read</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/system.file.html" class="external-link">system.file</a></span><span class="op">(</span><span class="st">"shape/nc.shp"</span>, package<span class="op">=</span><span class="st">"sf"</span><span class="op">)</span><span class="op">)</span></span>
<span></span>
<span> <span class="co"># CREATE and link to a permanent GRASS folder at "root_folder", location named "project1"</span></span>
<span> <span class="fu"><a href="../reference/linkGRASS.html">linkGRASS</a></span><span class="op">(</span><span class="va">nc</span>, gisdbase <span class="op">=</span> <span class="va">root_folder</span>, location <span class="op">=</span> <span class="st">"project1"</span><span class="op">)</span></span>
<span></span>
<span> <span class="co"># ONLY LINK to a permanent GRASS folder at "root_folder", location named "project1"</span></span>
<span> <span class="fu"><a href="../reference/linkGRASS.html">linkGRASS</a></span><span class="op">(</span>gisdbase <span class="op">=</span> <span class="va">root_folder</span>, location <span class="op">=</span> <span class="st">"project1"</span>, gisdbase_exist <span class="op">=</span> <span class="cn">TRUE</span> <span class="op">)</span></span>
<span></span>
<span></span>
<span> <span class="co"># setting up GRASS manually with spatial parameters of the nc data</span></span>
<span> <span class="va">epsg</span> <span class="op">=</span> <span class="fl">28992</span></span>
<span> <span class="va">proj4_string</span> <span class="op">&lt;-</span> <span class="fu">sp</span><span class="fu">::</span><span class="fu"><a href="https://edzer.github.io/sp/reference/CRS-class.html" class="external-link">CRS</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/paste.html" class="external-link">paste0</a></span><span class="op">(</span><span class="st">"+init=epsg:"</span>,<span class="va">epsg</span><span class="op">)</span><span class="op">)</span></span>
<span> </span>
<span> <span class="fu"><a href="../reference/linkGRASS.html">linkGRASS</a></span><span class="op">(</span>spatial_params <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">178605</span>,<span class="fl">329714</span>,<span class="fl">181390</span>,<span class="fl">333611</span>,<span class="va">proj4_string</span><span class="op">@</span><span class="va">projargs</span><span class="op">)</span>,epsg<span class="op">=</span><span class="va">epsg</span><span class="op">)</span></span>
<span></span>
<span> <span class="co"># creating a GRASS gisdbase manually with spatial parameters of the nc data</span></span>
<span> <span class="co"># additionally using a peramanent directory "root_folder" and the location "nc_spatial_params "</span></span>
<span> <span class="va">epsg</span> <span class="op">=</span> <span class="fl">4267</span></span>
<span> <span class="va">proj4_string</span> <span class="op">&lt;-</span> <span class="fu">sp</span><span class="fu">::</span><span class="fu"><a href="https://edzer.github.io/sp/reference/CRS-class.html" class="external-link">CRS</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/paste.html" class="external-link">paste0</a></span><span class="op">(</span><span class="st">"+init=epsg:"</span>,<span class="va">epsg</span><span class="op">)</span><span class="op">)</span><span class="op">@</span><span class="va">projargs</span></span>
<span> <span class="fu"><a href="../reference/linkGRASS.html">linkGRASS</a></span><span class="op">(</span>gisdbase <span class="op">=</span> <span class="va">root_folder</span>,</span>
<span>            location <span class="op">=</span> <span class="st">"nc_spatial_params"</span>,</span>
<span>            spatial_params <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="op">-</span><span class="fl">84.32385</span>, <span class="fl">33.88199</span>,<span class="op">-</span><span class="fl">75.45698</span>,<span class="fl">36.58965</span>,<span class="va">proj4_string</span><span class="op">)</span>,epsg <span class="op">=</span> <span class="va">epsg</span><span class="op">)</span></span></code></pre></div>
</div>
<div class="section level4">
<h4 id="typical-for-specified-search-paths-and-os">Typical for specified search paths and OS<a class="anchor" aria-label="anchor" href="#typical-for-specified-search-paths-and-os"></a>
</h4>
<p>The full disk search can be tedious, especially on Windows it can
easily take 10 minutes or more. So it is helpful to specify a search
path to narrow down the search. To search for <code>GRASS</code>
installations in the home directory, you can use the following
command.</p>
<div class="sourceCode" id="cb7"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># Link the GRASS installation and define the search location</span></span>
<span> <span class="fu"><a href="../reference/linkGRASS.html">linkGRASS</a></span><span class="op">(</span><span class="va">nc</span>, search_path <span class="op">=</span> <span class="st">"~/"</span><span class="op">)</span></span></code></pre></div>
<p>If you already did a full search and kow your installation fo example
using the command <code>findGRASS</code> you can use the result directly
for linking.</p>
<div class="sourceCode" id="cb8"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb8-1"><a href="#cb8-1" tabindex="-1"></a><span class="fu">findGRASS</span>()</span>
<span id="cb8-2"><a href="#cb8-2" tabindex="-1"></a>     instDir version installation_type</span>
<span id="cb8-3"><a href="#cb8-3" tabindex="-1"></a><span class="dv">1</span> <span class="sc">/</span>usr<span class="sc">/</span>lib<span class="sc">/</span>grass83   <span class="dv">8</span>.<span class="fl">3.2</span>             grass</span>
<span id="cb8-4"><a href="#cb8-4" tabindex="-1"></a></span>
<span id="cb8-5"><a href="#cb8-5" tabindex="-1"></a><span class="co"># now linking it </span></span>
<span id="cb8-6"><a href="#cb8-6" tabindex="-1"></a><span class="fu">linkGRASS</span>(nc,<span class="fu">c</span>(<span class="st">"/usr/lib/grass83"</span>,<span class="st">"8.3.2"</span>,<span class="st">"grass"</span>),<span class="at">epsg =</span> <span class="dv">4267</span>) </span>
<span id="cb8-7"><a href="#cb8-7" tabindex="-1"></a></span>
<span id="cb8-8"><a href="#cb8-8" tabindex="-1"></a><span class="co"># corresponding linkage running windows</span></span>
<span id="cb8-9"><a href="#cb8-9" tabindex="-1"></a><span class="fu">linkGRASS</span>(nc,<span class="fu">c</span>(<span class="st">"C:/Program Files/GRASS GIS7.0.5"</span>,<span class="st">"GRASS GIS 7.0.5"</span>,<span class="st">"NSIS"</span>)) </span></code></pre></div>
</div>
<div class="section level4">
<h4 id="manual-version-selection">Manual version selection<a class="anchor" aria-label="anchor" href="#manual-version-selection"></a>
</h4>
<p>Finally, some more specific examples related to interactive selection
or OS-specific settings. Manually select the <code>GRASS</code>
installation and use the meuse <code>sf</code> object for spatial
referencing. If you only have one installation it is directly
selected.</p>
<div class="sourceCode" id="cb9"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="../reference/linkGRASS.html">linkGRASS</a></span><span class="op">(</span><span class="va">nc</span>, ver_select <span class="op">=</span> <span class="cn">TRUE</span><span class="op">)</span></span></code></pre></div>
</div>
<div class="section level4">
<h4 id="creating-a-permanent-gisdbase-folder">Creating a permanent gisdbase folder<a class="anchor" aria-label="anchor" href="#creating-a-permanent-gisdbase-folder"></a>
</h4>
<p>Create and link a permanent <code>GRASS</code> gisdbase (folder
structure) in “~/temp3” with the default mapset “PERMANENT”” and the
location “project1”. Use the <code>sf</code> object for all spatial
attributes.</p>
<div class="sourceCode" id="cb10"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="../reference/linkGRASS.html">linkGRASS</a></span><span class="op">(</span>x <span class="op">=</span> <span class="va">nc</span>, </span>
<span>                     gisdbase <span class="op">=</span> <span class="st">"~/temp3"</span>,</span>
<span>                     location <span class="op">=</span> <span class="st">"project1"</span><span class="op">)</span>   </span></code></pre></div>
</div>
<div class="section level4">
<h4 id="using-a-permanent-gisdbase-folder">Using a permanent gisdbase folder<a class="anchor" aria-label="anchor" href="#using-a-permanent-gisdbase-folder"></a>
</h4>
<p>Link to the permanent <code>GRASS</code> gisdbase (folder structure)
in “~/temp3” with the default mapset “PERMANENT” and the location named
“project1”. Use the formerly referencend nc <code>sf</code> object
parameter for all spatial attributes.</p>
<div class="sourceCode" id="cb11"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="../reference/linkGRASS.html">linkGRASS</a></span><span class="op">(</span>gisdbase <span class="op">=</span> <span class="st">"~/temp3"</span>, location <span class="op">=</span> <span class="st">"project1"</span>, </span>
<span>                     gisdbase_exist <span class="op">=</span> <span class="cn">TRUE</span><span class="op">)</span>   </span></code></pre></div>
</div>
<div class="section level4">
<h4 id="manual-setup-of-the-spatial-attributes">Manual Setup of the spatial attributes<a class="anchor" aria-label="anchor" href="#manual-setup-of-the-spatial-attributes"></a>
</h4>
<p>Setting up <code>GRASS</code> manually with spatial parameters of the
meuse data</p>
<div class="sourceCode" id="cb12"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span> <span class="fu"><a href="../reference/linkGRASS.html">linkGRASS</a></span><span class="op">(</span>spatial_params <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">178605</span>,<span class="fl">329714</span>,<span class="fl">181390</span>,<span class="fl">333611</span>,</span>
<span>                              <span class="st">"+proj=sterea +lat_0=52.15616055555555 </span></span>
<span><span class="st">                               +lon_0=5.38763888888889 +k=0.9999079 </span></span>
<span><span class="st">                               +x_0=155000 +y_0=463000 +no_defs </span></span>
<span><span class="st">                               +a=6377397.155 +rf=299.1528128</span></span>
<span><span class="st">                               +towgs84=565.4171,50.3319,465.5524,</span></span>
<span><span class="st">                                -0.398957,0.343988,-1.8774,4.0725</span></span>
<span><span class="st">                               +to_meter=1"</span><span class="op">)</span>,epsg <span class="op">=</span> <span class="fl">28992</span><span class="op">)</span> </span></code></pre></div>
</div>
</div>
<div class="section level2">
<h2 id="a-typical-use-case-for-the-orfeo-toolbox-wrapper">A typical use case for the Orfeo Toolbox wrapper<a class="anchor" aria-label="anchor" href="#a-typical-use-case-for-the-orfeo-toolbox-wrapper"></a>
</h2>
<p>link2GI supports the use of the Orfeo Toolbox with a simple
list-based wrapper function. Actually, two functions parse the module
and function syntax dumps and generate a command list that can be easily
modified with the necessary arguments. If you have installed it in a
user home directory you need to adrees this:</p>
<p>Usually you have to get the module list first:</p>
<div class="sourceCode" id="cb13"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># link to the installed OTB Linux HOME directory</span></span>
<span><span class="va">otblink</span><span class="op">&lt;-</span><span class="fu">link2GI</span><span class="fu">::</span><span class="fu"><a href="../reference/linkOTB.html">linkOTB</a></span><span class="op">(</span>searchLocation <span class="op">=</span> <span class="st">"~/apps/OTB-8.1.2-Linux64/"</span><span class="op">)</span>  </span>
<span></span>
<span></span>
<span><span class="co"># get the list of modules from the linked version</span></span>
<span><span class="va">algo</span><span class="op">&lt;-</span><span class="fu"><a href="../reference/parseOTBAlgorithms.html">parseOTBAlgorithms</a></span><span class="op">(</span>gili <span class="op">=</span> <span class="va">otblink</span><span class="op">)</span></span></code></pre></div>
<p>Based on the modules of the current version of `OTB’, you can then
select the module(s) you want to use.</p>
<div class="sourceCode" id="cb14"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co">## for the example we use the edge detection, </span></span>
<span><span class="va">algoKeyword</span> <span class="op">&lt;-</span> <span class="st">"EdgeExtraction"</span></span>
<span></span>
<span><span class="co">## extract the command list for the selected algorithm </span></span>
<span><span class="va">cmd</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/parseOTBFunction.html">parseOTBFunction</a></span><span class="op">(</span>algo <span class="op">=</span> <span class="va">algoKeyword</span>, gili <span class="op">=</span> <span class="va">otblink</span><span class="op">)</span></span>
<span></span>
<span><span class="co">## print the current command</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/print.html" class="external-link">print</a></span><span class="op">(</span><span class="va">cmd</span><span class="op">)</span></span></code></pre></div>
<p>Admittedly, this is a very simple and preliminary approach.
Nevertheless, it will give you a valid list of all <code>OTB</code> API
calls that you can easily manipulate to suit your needs. The following
working example will give you an idea of how to use it.</p>
<div class="sourceCode" id="cb15"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">require</a></span><span class="op">(</span><span class="va"><a href="https://github.com/r-spatial/link2GI/" class="external-link">link2GI</a></span><span class="op">)</span></span>
<span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">require</a></span><span class="op">(</span><span class="va"><a href="https://rspatial.org/" class="external-link">terra</a></span><span class="op">)</span></span>
<span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">require</a></span><span class="op">(</span><span class="va"><a href="https://github.com/timelyportfolio/listviewer" class="external-link">listviewer</a></span><span class="op">)</span></span>
<span></span>
<span><span class="va">otblink</span> <span class="op">&lt;-</span> <span class="fu">link2GI</span><span class="fu">::</span><span class="fu"><a href="../reference/linkOTB.html">linkOTB</a></span><span class="op">(</span>searchLocation <span class="op">=</span> <span class="st">"~/apps/OTB-8.1.2-Linux64/"</span><span class="op">)</span></span>
<span> <span class="va">root_folder</span><span class="op">&lt;-</span><span class="fu"><a href="https://rdrr.io/r/base/tempfile.html" class="external-link">tempdir</a></span><span class="op">(</span><span class="op">)</span></span>
<span> </span>
<span><span class="va">fn</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/system.file.html" class="external-link">system.file</a></span><span class="op">(</span><span class="st">"ex/elev.tif"</span>, package <span class="op">=</span> <span class="st">"terra"</span><span class="op">)</span></span>
<span></span>
<span><span class="co">## for the example we use the edge detection, </span></span>
<span><span class="va">algoKeyword</span><span class="op">&lt;-</span> <span class="st">"EdgeExtraction"</span></span>
<span></span>
<span><span class="co">## extract the command list for the selected algorithm </span></span>
<span><span class="va">cmd</span><span class="op">&lt;-</span><span class="fu"><a href="../reference/parseOTBFunction.html">parseOTBFunction</a></span><span class="op">(</span>algo <span class="op">=</span> <span class="va">algoKeyword</span>, gili <span class="op">=</span> <span class="va">otblink</span><span class="op">)</span></span>
<span></span>
<span><span class="co">## define the mandatory arguments all other will be default</span></span>
<span><span class="va">cmd</span><span class="op">$</span><span class="va">help</span> <span class="op">=</span> <span class="cn">NULL</span></span>
<span><span class="va">cmd</span><span class="op">$</span><span class="va">input_in</span>  <span class="op">&lt;-</span> <span class="va">fn</span></span>
<span><span class="va">cmd</span><span class="op">$</span><span class="va">filter</span> <span class="op">&lt;-</span> <span class="st">"touzi"</span></span>
<span><span class="va">cmd</span><span class="op">$</span><span class="va">channel</span> <span class="op">&lt;-</span> <span class="fl">1</span></span>
<span><span class="va">cmd</span><span class="op">$</span><span class="va">out</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/file.path.html" class="external-link">file.path</a></span><span class="op">(</span><span class="va">root_folder</span>,<span class="fu"><a href="https://rdrr.io/r/base/paste.html" class="external-link">paste0</a></span><span class="op">(</span><span class="st">"out"</span>,<span class="va">cmd</span><span class="op">$</span><span class="va">filter</span>,<span class="st">".tif"</span><span class="op">)</span><span class="op">)</span></span>
<span></span>
<span><span class="co">## run algorithm</span></span>
<span><span class="va">retStack</span><span class="op">&lt;-</span><span class="fu"><a href="../reference/runOTB.html">runOTB</a></span><span class="op">(</span><span class="va">cmd</span>,gili <span class="op">=</span> <span class="va">otblink</span><span class="op">)</span></span>
<span></span>
<span><span class="co">## plot filter raster on the green channel</span></span>
<span><span class="fu"><a href="https://rspatial.github.io/terra/reference/plot.html" class="external-link">plot</a></span><span class="op">(</span><span class="va">retStack</span><span class="op">)</span></span></code></pre></div>
</div>
<div class="section level2">
<h2 id="usecases-presented-on-the-geostat-august-2018">Usecases presented on the GEOSTAT August 2018<a class="anchor" aria-label="anchor" href="#usecases-presented-on-the-geostat-august-2018"></a>
</h2>
<p>During the GEOSTAT 2018 (see <a href="https://opengeohub.org" class="external-link uri">https://opengeohub.org</a>) in Prague some more complex use
cases have been presented.</p>
<div class="section level3">
<h3 id="find-slides-and-materials">Find slides and materials<a class="anchor" aria-label="anchor" href="#find-slides-and-materials"></a>
</h3>
<ul>
<li><a href="https://gisma.github.io/link2gi2018/link2gi2018.html#1" class="external-link">Presentation
slides</a></li>
<li><a href="https://github.com/gisma/link2gi2018" class="external-link">Github
Repository</a></li>
</ul>
</div>
<div class="section level3">
<h3 id="the-examples">The examples<a class="anchor" aria-label="anchor" href="#the-examples"></a>
</h3>
<ul>
<li>Basic usage of <code>SAGA</code> and <code>OTB</code> calls - <a href="https://github.com/gisma/link2gi2018/blob/master/R/usecases/saga-otb/useCaseSAGA-OTB.R" class="external-link">SAGA
&amp; OTB basic usecase</a>
</li>
<li>Wrapping a <a href="https://neteler.gitlab.io/grass-gis-analysis/02_grass-gis_ecad_analysis/" class="external-link">GRASS
GIS example</a> of Markus Neteler as presented on GEOSTAT 2018 - <a href="https://github.com/gisma/link2gi2018/blob/master/R/usecases/grass/useCaseGRASS-Neteler2018.R" class="external-link">Analysing
the ECA&amp;D climatic data - reloaded</a>
</li>
<li>Performing a <code>GRASS</code> based cost analysis on a huge cost
raster - <a href="https://github.com/gisma/link2gi2018/blob/master/R/usecases/cost-analysis/useCaseBeetle.R" class="external-link">Beetle
spread over high asia</a>
</li>
<li>Deriving a canopy height model using a mixed API approach - <a href="https://github.com/gisma/link2gi2018/blob/master/R/usecases/uav-pc/useCaseCHM.R" class="external-link">Canopy
Height Model from UAV derived point clouds</a>
</li>
</ul>
</div>
</div>
  </main><aside class="col-md-3"><nav id="toc"><h2>On this page</h2>
    </nav></aside>
</div>



    <footer><div class="pkgdown-footer-left">
  <p>Developed by Chris Reudenbach.</p>
</div>

<div class="pkgdown-footer-right">
  <p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.0.9.</p>
</div>

    </footer>
</div>

  

  

  </body>
</html>
